{"version":3,"sources":["element-queries.js"],"names":["factory","moduleName","ccs_define","moduleExport","window","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","fn","setTimeout","forEachElement","elements","callback","elementsType","Object","prototype","toString","call","isCollectionTyped","jQuery","Elements","i","j","length","getElementSize","element","getBoundingClientRect","width","offsetWidth","height","offsetHeight","rect","Math","round","ResizeSensor","EventQueue","q","this","add","ev","push","sizeInfo","remove","newQueue","attachResizeEvent","resized","resizedAttached","resizeSensor","document","createElement","dir","className","style","styleChild","cssText","innerHTML","appendChild","computedStyle","getComputedStyle","position","getPropertyValue","dirty","rafId","expand","childNodes","expandChild","shrink","size","lastWidth","lastHeight","initialHiddenCheck","lastAnimationFrame","reset","scrollLeft","scrollTop","resetExpandShrink","resetSensor","event","createEvent","initEvent","onResized","onScroll","dispatchEvent","addEvent","el","name","cb","attachEvent","addEventListener","elem","detach","contains","removeChild","MutationObserver","observer","mutations","hasOwnProperty","items","addedNodes","observe","body","childList","subtree","ElementQueries","CcsElementQueries","cssStyleElement","allQueries","idToSelectorMapping","getEmSize","documentElement","fontSize","parseFloat","convertToPx","value","numbers","split","units","clientWidth","clientHeight","vw","vh","chooser","SetupInformation","id","key","option","elementSize","actualValue","attrValues","attrValue","attrName","eventDetails","attributes","property","mode","indexOf","k","pointValue","getAttribute","setAttribute","substr","removeAttribute","hasAttribute","setupElement","elementQueriesSetupInformation","elementQueriesSensor","getQuery","container","query","querySelectorAll","bind","$$","attachResponsiveImage","children","rules","sources","defaultImageId","lastActiveImage","loadedImages","tagName","toLowerCase","minWidth","src","rule","display","check","imageToDisplay","image","Image","onload","setup","selector","breakpoints","keys","item","values","candidate","n","isNaN","isFinite","regex","attrRegex","extractQuery","css","match","smatch","attrs","attrMatch","replace","exec","ElementQuery","instance","readRules","type","selectorText","cssRules","styleSheet","defaultCssInjected","init","animationStart","e","target","parseInt","getElementsByTagName","styleSheets","href","console","log","findResponsiveImages","findElementQueriesElements","update","listen","test","navigator","userAgent","DOMLoadTimer","setInterval","readyState","clearInterval","domLoaded"],"mappings":"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","file":"element-queries.min.js","sourcesContent":["/*!\n * Copyright Marc J. Schmidt. See the LICENSE file at the top-level\n * directory of this distribution and at\n * https://github.com/marcj/css-element-queries/blob/master/LICENSE.\n */\n(function (factory) {\n\tvar moduleName = \"ResizeSensor\";\n\n\tif (typeof ccs_define === \"function\") {\n\t\tccs_define(moduleName, [], factory);\n\t\treturn;\n\t}\n\n\tvar moduleExport = factory();\n\tif (typeof moduleExport !== \"undefined\") {\n\t\twindow[moduleName] = moduleExport;\n\t}\n}\n\t(function () {\n\t\t// Make sure it does not throw in a SSR (Server Side Rendering) situation\n\t\tif (typeof window === \"undefined\") {\n\t\t\treturn null;\n\t\t}\n\t\t// Only used for the dirty checking, so the event callback count is limited to max 1 call per fps per sensor.\n\t\t// In combination with the event based resize sensor this saves cpu time, because the sensor is too fast and\n\t\t// would generate too many unnecessary events.\n\t\tvar requestAnimationFrame = window.requestAnimationFrame ||\n\t\t\twindow.mozRequestAnimationFrame ||\n\t\t\twindow.webkitRequestAnimationFrame ||\n\t\t\tfunction (fn) {\n\t\t\t\treturn window.setTimeout(fn, 20);\n\t\t\t};\n\n\t\t/**\n\t\t * Iterate over each of the provided element(s).\n\t\t *\n\t\t * @param {HTMLElement|HTMLElement[]} elements\n\t\t * @param {Function}                  callback\n\t\t */\n\t\tfunction forEachElement(elements, callback) {\n\t\t\tvar elementsType = Object.prototype.toString.call(elements);\n\t\t\tvar isCollectionTyped = ('[object Array]' === elementsType\n\t\t\t\t|| ('[object NodeList]' === elementsType)\n\t\t\t\t|| ('[object HTMLCollection]' === elementsType)\n\t\t\t\t|| ('[object Object]' === elementsType)\n\t\t\t\t|| ('undefined' !== typeof jQuery && elements instanceof jQuery) //jquery\n\t\t\t\t|| ('undefined' !== typeof Elements && elements instanceof Elements) //mootools\n\t\t\t);\n\t\t\tvar i = 0, j = elements.length;\n\t\t\tif (isCollectionTyped) {\n\t\t\t\tfor (; i < j; i++) {\n\t\t\t\t\tcallback(elements[i]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcallback(elements);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t* Get element size\n\t\t* @param {HTMLElement} element\n\t\t* @returns {Object} {width, height}\n\t\t*/\n\t\tfunction getElementSize(element) {\n\t\t\tif (!element.getBoundingClientRect) {\n\t\t\t\treturn {\n\t\t\t\t\twidth: element.offsetWidth,\n\t\t\t\t\theight: element.offsetHeight\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar rect = element.getBoundingClientRect();\n\t\t\treturn {\n\t\t\t\twidth: Math.round(rect.width),\n\t\t\t\theight: Math.round(rect.height)\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Class for dimension change detection.\n\t\t *\n\t\t * @param {Element|Element[]|Elements|jQuery} element\n\t\t * @param {Function} callback\n\t\t *\n\t\t * @constructor\n\t\t */\n\t\tvar ResizeSensor = function (element, callback) {\n\t\t\t/**\n\t\t\t *\n\t\t\t * @constructor\n\t\t\t */\n\t\t\tfunction EventQueue() {\n\t\t\t\tvar q = [];\n\t\t\t\tthis.add = function (ev) {\n\t\t\t\t\tq.push(ev);\n\t\t\t\t};\n\n\t\t\t\tvar i, j;\n\t\t\t\tthis.call = function (sizeInfo) {\n\t\t\t\t\tfor (i = 0, j = q.length; i < j; i++) {\n\t\t\t\t\t\tq[i].call(this, sizeInfo);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.remove = function (ev) {\n\t\t\t\t\tvar newQueue = [];\n\t\t\t\t\tfor (i = 0, j = q.length; i < j; i++) {\n\t\t\t\t\t\tif (q[i] !== ev) newQueue.push(q[i]);\n\t\t\t\t\t}\n\t\t\t\t\tq = newQueue;\n\t\t\t\t};\n\n\t\t\t\tthis.length = function () {\n\t\t\t\t\treturn q.length;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t *\n\t\t\t * @param {HTMLElement} element\n\t\t\t * @param {Function}    resized\n\t\t\t */\n\t\t\tfunction attachResizeEvent(element, resized) {\n\t\t\t\tif (!element) return;\n\t\t\t\tif (element.resizedAttached) {\n\t\t\t\t\telement.resizedAttached.add(resized);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\telement.resizedAttached = new EventQueue();\n\t\t\t\telement.resizedAttached.add(resized);\n\n\t\t\t\telement.resizeSensor = document.createElement('div');\n\t\t\t\telement.resizeSensor.dir = 'ltr';\n\t\t\t\telement.resizeSensor.className = 'resize-sensor';\n\t\t\t\tvar style = 'pointer-events: none; position: absolute; left: 0px; top: 0px; right: 0; bottom: 0; ' +\n\t\t\t\t\t'overflow: hidden; z-index: -1; visibility: hidden; max-width: 100%;';\n\t\t\t\tvar styleChild = 'position: absolute; left: 0; top: 0; transition: 0s;';\n\n\t\t\t\telement.resizeSensor.style.cssText = style;\n\t\t\t\telement.resizeSensor.innerHTML =\n\t\t\t\t\t'<div class=\"resize-sensor-expand\" style=\"' + style + '\">' +\n\t\t\t\t\t'<div style=\"' + styleChild + '\"></div>' +\n\t\t\t\t\t'</div>' +\n\t\t\t\t\t'<div class=\"resize-sensor-shrink\" style=\"' + style + '\">' +\n\t\t\t\t\t'<div style=\"' + styleChild + ' width: 200%; height: 200%\"></div>' +\n\t\t\t\t\t'</div>';\n\t\t\t\telement.appendChild(element.resizeSensor);\n\n\t\t\t\tvar computedStyle = window.getComputedStyle(element);\n\t\t\t\tvar position = computedStyle ? computedStyle.getPropertyValue('position') : null;\n\t\t\t\tif ('absolute' !== position && 'relative' !== position && 'fixed' !== position) {\n\t\t\t\t\telement.style.position = 'relative';\n\t\t\t\t}\n\n\t\t\t\tvar expand = element.resizeSensor.childNodes[0];\n\t\t\t\tvar expandChild = expand.childNodes[0];\n\t\t\t\tvar shrink = element.resizeSensor.childNodes[1];\n\t\t\t\tvar dirty, rafId;\n\t\t\t\tvar size = getElementSize(element);\n\t\t\t\tvar lastWidth = size.width;\n\t\t\t\tvar lastHeight = size.height;\n\t\t\t\tvar initialHiddenCheck = true;\n\t\t\t\tvar lastAnimationFrame = 0;\n\n\t\t\t\tvar resetExpandShrink = function () {\n\t\t\t\t\tvar width = element.offsetWidth;\n\t\t\t\t\tvar height = element.offsetHeight;\n\n\t\t\t\t\texpandChild.style.width = (width + 10) + 'px';\n\t\t\t\t\texpandChild.style.height = (height + 10) + 'px';\n\n\t\t\t\t\texpand.scrollLeft = width + 10;\n\t\t\t\t\texpand.scrollTop = height + 10;\n\n\t\t\t\t\tshrink.scrollLeft = width + 10;\n\t\t\t\t\tshrink.scrollTop = height + 10;\n\t\t\t\t};\n\n\t\t\t\tvar reset = function () {\n\t\t\t\t\t// Check if element is hidden\n\t\t\t\t\tif (initialHiddenCheck) {\n\t\t\t\t\t\tvar invisible = element.offsetWidth === 0 && element.offsetHeight === 0;\n\t\t\t\t\t\tif (invisible) {\n\t\t\t\t\t\t\t// Check in next frame\n\t\t\t\t\t\t\tif (!lastAnimationFrame) {\n\t\t\t\t\t\t\t\tlastAnimationFrame = requestAnimationFrame(function () {\n\t\t\t\t\t\t\t\t\tlastAnimationFrame = 0;\n\n\t\t\t\t\t\t\t\t\treset();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Stop checking\n\t\t\t\t\t\t\tinitialHiddenCheck = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tresetExpandShrink();\n\t\t\t\t};\n\t\t\t\telement.resizeSensor.resetSensor = reset;\n\n\t\t\t\tvar event = document.createEvent(\"Event\");\n\t\t\t\tevent.initEvent(\"ccsResize\", true, false);\n\n\t\t\t\tvar onResized = function () {\n\t\t\t\t\trafId = 0;\n\n\t\t\t\t\tif (!dirty) return;\n\n\t\t\t\t\tlastWidth = size.width;\n\t\t\t\t\tlastHeight = size.height;\n\n\t\t\t\t\tif (element.resizedAttached) {\n\t\t\t\t\t\telement.resizedAttached.call(size);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tvar onScroll = function () {\n\t\t\t\t\tsize = getElementSize(element);\n\t\t\t\t\tdirty = size.width !== lastWidth || size.height !== lastHeight;\n\n\t\t\t\t\tif (dirty && !rafId) {\n\t\t\t\t\t\trafId = requestAnimationFrame(onResized);\n\t\t\t\t\t}\n\n\t\t\t\t\treset();\n\n\t\t\t\t\telement.dispatchEvent(event);\n\t\t\t\t};\n\n\t\t\t\tvar addEvent = function (el, name, cb) {\n\t\t\t\t\tif (el.attachEvent) {\n\t\t\t\t\t\tel.attachEvent('on' + name, cb);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.addEventListener(name, cb);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\taddEvent(expand, 'scroll', onScroll);\n\t\t\t\taddEvent(shrink, 'scroll', onScroll);\n\n\t\t\t\t// Fix for custom Elements\n\t\t\t\trequestAnimationFrame(reset);\n\t\t\t}\n\n\t\t\tforEachElement(element, function (elem) {\n\t\t\t\tattachResizeEvent(elem, callback);\n\t\t\t});\n\n\t\t\tthis.detach = function (ev) {\n\t\t\t\tResizeSensor.detach(element, ev);\n\t\t\t};\n\n\t\t\tthis.reset = function () {\n\t\t\t\telement.resizeSensor.resetSensor();\n\t\t\t};\n\t\t};\n\n\t\tResizeSensor.reset = function (element) {\n\t\t\tforEachElement(element, function (elem) {\n\t\t\t\telem.resizeSensor.resetSensor();\n\t\t\t});\n\t\t};\n\n\t\tResizeSensor.detach = function (element, ev) {\n\t\t\tforEachElement(element, function (elem) {\n\t\t\t\tif (!elem) return;\n\t\t\t\tif (elem.resizedAttached && typeof ev === \"function\") {\n\t\t\t\t\telem.resizedAttached.remove(ev);\n\t\t\t\t\tif (elem.resizedAttached.length()) return;\n\t\t\t\t}\n\t\t\t\tif (elem.resizeSensor) {\n\t\t\t\t\tif (elem.contains(elem.resizeSensor)) {\n\t\t\t\t\t\telem.removeChild(elem.resizeSensor);\n\t\t\t\t\t}\n\t\t\t\t\tdelete elem.resizeSensor;\n\t\t\t\t\tdelete elem.resizedAttached;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tif (typeof MutationObserver !== \"undefined\") {\n\t\t\tvar observer = new MutationObserver(function (mutations) {\n\t\t\t\tfor (var i in mutations) {\n\t\t\t\t\tif (mutations.hasOwnProperty(i)) {\n\t\t\t\t\t\tvar items = mutations[i].addedNodes;\n\t\t\t\t\t\tfor (var j = 0; j < items.length; j++) {\n\t\t\t\t\t\t\tif (items[j].resizeSensor) {\n\t\t\t\t\t\t\t\tResizeSensor.reset(items[j]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdocument.addEventListener(\"DOMContentLoaded\", function (event) {\n\t\t\t\tobserver.observe(document.body, {\n\t\t\t\t\tchildList: true,\n\t\t\t\t\tsubtree: true,\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn ResizeSensor;\n\n\t}));\n\n'use strict';\n\n/*!\n * Copyright Marc J. Schmidt. See the LICENSE file at the top-level\n * directory of this distribution and at\n * https://github.com/marcj/css-element-queries/blob/master/LICENSE.\n */\n(function (factory) {\n\tvar moduleName = \"ElementQueries\";\n\n\tif (typeof ccs_define === \"function\") {\n\t\tccs_define(moduleName, [\"ResizeSensor\"], factory);\n\t\treturn;\n\t}\n\n\tvar moduleExport = factory();\n\tif (typeof moduleExport !== \"undefined\") {\n\t\twindow[moduleName] = moduleExport;\n\t}\n}\n\t(function (ResizeSensor) {\n\t\t/**\n\t\t\t*\n\t\t\t* @type {Function}\n\t\t\t* @constructor\n\t\t\t*/\n\t\tvar ElementQueries = this.CcsElementQueries = function () {\n\t\t\t//<style> element with our dynamically created styles\n\t\t\tvar cssStyleElement;\n\n\t\t\t//all rules found for element queries\n\t\t\tvar allQueries = {};\n\n\t\t\t//association map to identify which selector belongs to a element from the animationstart event.\n\t\t\tvar idToSelectorMapping = [];\n\n\t\t\t/**\n\t\t\t\t*\n\t\t\t\t* @param element\n\t\t\t\t* @returns {Number}\n\t\t\t\t*/\n\t\t\tfunction getEmSize(element) {\n\t\t\t\tif (!element) {\n\t\t\t\t\telement = document.documentElement;\n\t\t\t\t}\n\t\t\t\tvar fontSize = window.getComputedStyle(element, null).fontSize;\n\t\t\t\treturn parseFloat(fontSize) || 16;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t\t* Get element size\n\t\t\t\t* @param {HTMLElement} element\n\t\t\t\t* @returns {Object} {width, height}\n\t\t\t\t*/\n\t\t\tfunction getElementSize(element) {\n\t\t\t\tif (!element.getBoundingClientRect) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\twidth: element.offsetWidth,\n\t\t\t\t\t\theight: element.offsetHeight\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar rect = element.getBoundingClientRect();\n\t\t\t\treturn {\n\t\t\t\t\twidth: Math.round(rect.width),\n\t\t\t\t\theight: Math.round(rect.height)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*!\n\t\t\t\t*\n\t\t\t\t* @copyright https://github.com/Mr0grog/element-query/blob/master/LICENSE\n\t\t\t\t*\n\t\t\t\t* @param {HTMLElement} element\n\t\t\t\t* @param {*} value\n\t\t\t\t* @returns {*}\n\t\t\t\t*/\n\t\t\tfunction convertToPx(element, value) {\n\t\t\t\tvar numbers = value.split(/\\d/);\n\t\t\t\tvar units = numbers[numbers.length - 1];\n\t\t\t\tvalue = parseFloat(value);\n\t\t\t\tswitch (units) {\n\t\t\t\t\tcase \"px\":\n\t\t\t\t\t\treturn value;\n\t\t\t\t\tcase \"em\":\n\t\t\t\t\t\treturn value * getEmSize(element);\n\t\t\t\t\tcase \"rem\":\n\t\t\t\t\t\treturn value * getEmSize();\n\t\t\t\t\t// Viewport units!\n\t\t\t\t\t// According to http://quirksmode.org/mobile/tableViewport.html\n\t\t\t\t\t// documentElement.clientWidth/Height gets us the most reliable info\n\t\t\t\t\tcase \"vw\":\n\t\t\t\t\t\treturn value * document.documentElement.clientWidth / 100;\n\t\t\t\t\tcase \"vh\":\n\t\t\t\t\t\treturn value * document.documentElement.clientHeight / 100;\n\t\t\t\t\tcase \"vmin\":\n\t\t\t\t\tcase \"vmax\":\n\t\t\t\t\t\tvar vw = document.documentElement.clientWidth / 100;\n\t\t\t\t\t\tvar vh = document.documentElement.clientHeight / 100;\n\t\t\t\t\t\tvar chooser = Math[units === \"vmin\" ? \"min\" : \"max\"];\n\t\t\t\t\t\treturn value * chooser(vw, vh);\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t// for now, not supporting physical units (since they are just a set number of px)\n\t\t\t\t\t// or ex/ch (getting accurate measurements is hard)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t\t*\n\t\t\t\t* @param {HTMLElement} element\n\t\t\t\t* @param {String} id\n\t\t\t\t* @constructor\n\t\t\t\t*/\n\t\t\tfunction SetupInformation(element, id) {\n\t\t\t\tthis.element = element;\n\t\t\t\tvar key, option, elementSize, value, actualValue, attrValues, attrValue, attrName, eventDetails;\n\n\t\t\t\tvar attributes = ['min-width', 'min-height', 'max-width', 'max-height'];\n\n\t\t\t\tvar event = document.createEvent(\"Event\");\n\t\t\t\tevent.initEvent(\"ccsBreakpointFired\", true, false);\n\n\t\t\t\t/**\n\t\t\t\t\t* Extracts the computed width/height and sets to min/max- attribute.\n\t\t\t\t\t*/\n\t\t\t\tthis.call = function () {\n\t\t\t\t\t// extract current dimensions\n\t\t\t\t\telementSize = getElementSize(this.element);\n\n\t\t\t\t\tattrValues = {};\n\t\t\t\t\teventDetails = {};\n\n\t\t\t\t\tfor (key in allQueries[id]) {\n\t\t\t\t\t\tif (!allQueries[id].hasOwnProperty(key)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\toption = allQueries[id][key];\n\n\t\t\t\t\t\tvalue = convertToPx(this.element, option.value);\n\n\t\t\t\t\t\tactualValue = option.property === 'width' ? elementSize.width : elementSize.height;\n\t\t\t\t\t\tattrName = option.mode + '-' + option.property;\n\t\t\t\t\t\tattrValue = '';\n\n\t\t\t\t\t\tif (option.mode === 'min' && actualValue >= value) {\n\t\t\t\t\t\t\tattrValue += option.value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (option.mode === 'max' && actualValue <= value) {\n\t\t\t\t\t\t\tattrValue += option.value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!attrValues[attrName]) attrValues[attrName] = '';\n\t\t\t\t\t\tif (attrValue && -1 === (' ' + attrValues[attrName] + ' ').indexOf(' ' + attrValue + ' ')) {\n\t\t\t\t\t\t\tattrValues[attrName] += ' ' + attrValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (var k in attributes) {\n\t\t\t\t\t\tif (!attributes.hasOwnProperty(k))\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\tif (attrValues[attributes[k]]) {\n\t\t\t\t\t\t\tvar pointValue = this.element.getAttribute(attributes[k]);\n\n\t\t\t\t\t\t\tthis.element.setAttribute(attributes[k], attrValues[attributes[k]].substr(1));\n\t\t\t\t\t\t\teventDetails[attributes[k]] = attrValues[attributes[k]].substr(1);\n\n\t\t\t\t\t\t\tif (pointValue !== attrValues[attributes[k]].substr(1)) {\n\t\t\t\t\t\t\t\tthis.element.dispatchEvent(event);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.element.removeAttribute(attributes[k]);\n\n\t\t\t\t\t\t\tif (this.element.hasAttribute(attributes[k])) {\n\t\t\t\t\t\t\t\tthis.element.dispatchEvent(event);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t/**\n\t\t\t\t* @param {HTMLElement} element\n\t\t\t\t* @param {Object}      id\n\t\t\t\t*/\n\t\t\tfunction setupElement(element, id) {\n\t\t\t\tif (!element.elementQueriesSetupInformation) {\n\t\t\t\t\telement.elementQueriesSetupInformation = new SetupInformation(element, id);\n\t\t\t\t}\n\t\t\t\tif (!element.elementQueriesSensor) {\n\t\t\t\t\telement.elementQueriesSensor = new ResizeSensor(element, function () {\n\t\t\t\t\t\telement.elementQueriesSetupInformation.call();\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\telement.elementQueriesSetupInformation.call();\n\t\t\t}\n\n\t\t\tfunction isNumeric(n) {\n\t\t\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t\t* Stores rules to the selector that should be applied once resized.\n\t\t\t\t*\n\t\t\t\t* @param {String} selector\n\t\t\t\t* @param {String} mode min|max\n\t\t\t\t* @param {String} property width|height\n\t\t\t\t* @param {String} value\n\t\t\t\t*/\n\n\t\t\tthis.setup = function (selector, breakpoints/*, mode, property, value*/) {\n\t\t\t\tif (!breakpoints || !Object.keys(breakpoints).length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (typeof (allQueries[selector]) === 'undefined') {\n\t\t\t\t\tallQueries[selector] = [];\n\t\t\t\t\t// add animation to trigger animationstart event, so we know exactly when a element appears in the DOM\n\n\t\t\t\t\tvar id = idToSelectorMapping.length;\n\t\t\t\t\tcssStyleElement.innerHTML += '\\n' + selector + ' {animation: 0.1s element-queries;}';\n\t\t\t\t\tcssStyleElement.innerHTML += '\\n' + selector + ' > .resize-sensor {min-width: ' + id + 'px;}';\n\t\t\t\t\tidToSelectorMapping.push(selector);\n\t\t\t\t}\n\n\t\t\t\tfor (var item in breakpoints) {\n\t\t\t\t\tif (!breakpoints.hasOwnProperty(item))\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tvar values = breakpoints[item];\n\n\t\t\t\t\tif (values.length === 0)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tvar candidate = item.split(\"-\");\n\t\t\t\t\tvar mode = candidate[0];\n\t\t\t\t\tvar property = candidate[1];\n\n\t\t\t\t\tfor (var j = 0; j < values.length; j++) {\n\t\t\t\t\t\tvar value = values[j];\n\n\t\t\t\t\t\tif (isNumeric(value)) {\n\t\t\t\t\t\t\tvalue += \"px\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tallQueries[selector].push({\n\t\t\t\t\t\t\tmode: mode,\n\t\t\t\t\t\t\tproperty: property,\n\t\t\t\t\t\t\tvalue: value\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction getQuery(container) {\n\t\t\t\tvar query;\n\t\t\t\tif (document.querySelectorAll) query = (container) ? container.querySelectorAll.bind(container) : document.querySelectorAll.bind(document);\n\t\t\t\tif (!query && 'undefined' !== typeof $$) query = $$;\n\t\t\t\tif (!query && 'undefined' !== typeof jQuery) query = jQuery;\n\n\t\t\t\tif (!query) {\n\t\t\t\t\tthrow 'No document.querySelectorAll, jQuery or Mootools\\'s $$ found.';\n\t\t\t\t}\n\n\t\t\t\treturn query;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t\t* If animationStart didn't catch a new element in the DOM, we can manually search for it\n\t\t\t\t*/\n\t\t\tfunction findElementQueriesElements(container) {\n\t\t\t\tvar query = getQuery(container);\n\n\t\t\t\tfor (var selector in allQueries) if (allQueries.hasOwnProperty(mode)) {\n\t\t\t\t\t// find all elements based on the extract query selector from the element query rule\n\t\t\t\t\tvar elements = query(selector, container);\n\n\t\t\t\t\tfor (var i = 0, j = elements.length; i < j; i++) {\n\t\t\t\t\t\tsetupElement(elements[i], selector);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t\t*\n\t\t\t\t* @param {HTMLElement} element\n\t\t\t\t*/\n\t\t\tfunction attachResponsiveImage(element) {\n\t\t\t\tvar children = [];\n\t\t\t\tvar rules = [];\n\t\t\t\tvar sources = [];\n\t\t\t\tvar defaultImageId = 0;\n\t\t\t\tvar lastActiveImage = -1;\n\t\t\t\tvar loadedImages = [];\n\n\t\t\t\tfor (var i in element.children) {\n\t\t\t\t\tif (!element.children.hasOwnProperty(i)) continue;\n\n\t\t\t\t\tif (element.children[i].tagName && element.children[i].tagName.toLowerCase() === 'img') {\n\t\t\t\t\t\tchildren.push(element.children[i]);\n\n\t\t\t\t\t\tvar minWidth = element.children[i].getAttribute('min-width') || element.children[i].getAttribute('data-min-width');\n\t\t\t\t\t\t//var minHeight = element.children[i].getAttribute('min-height') || element.children[i].getAttribute('data-min-height');\n\t\t\t\t\t\tvar src = element.children[i].getAttribute('data-src') || element.children[i].getAttribute('url');\n\n\t\t\t\t\t\tsources.push(src);\n\n\t\t\t\t\t\tvar rule = {\n\t\t\t\t\t\t\tminWidth: minWidth\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\trules.push(rule);\n\n\t\t\t\t\t\tif (!minWidth) {\n\t\t\t\t\t\t\tdefaultImageId = children.length - 1;\n\t\t\t\t\t\t\telement.children[i].style.display = 'block';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telement.children[i].style.display = 'none';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlastActiveImage = defaultImageId;\n\n\t\t\t\tfunction check() {\n\t\t\t\t\tvar imageToDisplay = false, i;\n\n\t\t\t\t\tfor (i in children) {\n\t\t\t\t\t\tif (!children.hasOwnProperty(i)) continue;\n\n\t\t\t\t\t\tif (rules[i].minWidth) {\n\t\t\t\t\t\t\tif (element.offsetWidth > rules[i].minWidth) {\n\t\t\t\t\t\t\t\timageToDisplay = i;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!imageToDisplay) {\n\t\t\t\t\t\t//no rule matched, show default\n\t\t\t\t\t\timageToDisplay = defaultImageId;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (lastActiveImage !== imageToDisplay) {\n\t\t\t\t\t\t//image change\n\n\t\t\t\t\t\tif (!loadedImages[imageToDisplay]) {\n\t\t\t\t\t\t\t//image has not been loaded yet, we need to load the image first in memory to prevent flash of\n\t\t\t\t\t\t\t//no content\n\n\t\t\t\t\t\t\tvar image = new Image();\n\t\t\t\t\t\t\timage.onload = function () {\n\t\t\t\t\t\t\t\tchildren[imageToDisplay].src = sources[imageToDisplay];\n\n\t\t\t\t\t\t\t\tchildren[lastActiveImage].style.display = 'none';\n\t\t\t\t\t\t\t\tchildren[imageToDisplay].style.display = 'block';\n\n\t\t\t\t\t\t\t\tloadedImages[imageToDisplay] = true;\n\n\t\t\t\t\t\t\t\tlastActiveImage = imageToDisplay;\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\timage.src = sources[imageToDisplay];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tchildren[lastActiveImage].style.display = 'none';\n\t\t\t\t\t\t\tchildren[imageToDisplay].style.display = 'block';\n\t\t\t\t\t\t\tlastActiveImage = imageToDisplay;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//make sure for initial check call the .src is set correctly\n\t\t\t\t\t\tchildren[imageToDisplay].src = sources[imageToDisplay];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\telement.resizeSensor = new ResizeSensor(element, check);\n\t\t\t\tcheck();\n\t\t\t}\n\n\t\t\tfunction findResponsiveImages() {\n\t\t\t\tvar query = getQuery();\n\n\t\t\t\tvar elements = query('[data-responsive-image],[responsive-image]');\n\t\t\t\tfor (var i = 0, j = elements.length; i < j; i++) {\n\t\t\t\t\tattachResponsiveImage(elements[i]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar regex = /,?[\\s\\t]*([^,\\n]*?)((?:\\[[\\s\\t]*?(?:min|max)-(?:width|height)[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"[^\"]*?\"[\\s\\t]*?])+)([^,\\n\\s\\{]*)/mgi;\n\t\t\tvar attrRegex = /\\[[\\s\\t]*?(min|max)-(width|height)[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"([^\"]*?)\"[\\s\\t]*?]/mgi;\n\n\t\t\t/**\n\t\t\t\t* @param {String} css\n\t\t\t\t*/\n\t\t\tfunction extractQuery(css) {\n\t\t\t\tvar match, smatch, attrs, attrMatch;\n\n\t\t\t\tcss = css.replace(/'/g, '\"');\n\t\t\t\twhile (null !== (match = regex.exec(css))) {\n\t\t\t\t\tsmatch = match[1] + match[3];\n\t\t\t\t\tattrs = match[2];\n\n\t\t\t\t\twhile (null !== (attrMatch = attrRegex.exec(attrs))) {\n\t\t\t\t\t\tElementQuery.instance.setup(smatch, attrMatch[1], attrMatch[2], attrMatch[3]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t\t* @param {CssRule[]|String} rules\n\t\t\t\t*/\n\t\t\tfunction readRules(rules) {\n\t\t\t\tvar selector = '';\n\n\t\t\t\tif (!rules) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ('string' === typeof rules) {\n\t\t\t\t\trules = rules.toLowerCase();\n\t\t\t\t\tif (-1 !== rules.indexOf('min-width') || -1 !== rules.indexOf('max-width')) {\n\t\t\t\t\t\textractQuery(rules);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (var i = 0, j = rules.length; i < j; i++) {\n\t\t\t\t\t\tif (1 === rules[i].type) {\n\t\t\t\t\t\t\tselector = rules[i].selectorText || rules[i].cssText;\n\t\t\t\t\t\t\tif (-1 !== selector.indexOf('min-height') || -1 !== selector.indexOf('max-height')) {\n\t\t\t\t\t\t\t\textractQuery(selector);\n\t\t\t\t\t\t\t} else if (-1 !== selector.indexOf('min-width') || -1 !== selector.indexOf('max-width')) {\n\t\t\t\t\t\t\t\textractQuery(selector);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (4 === rules[i].type) {\n\t\t\t\t\t\t\treadRules(rules[i].cssRules || rules[i].rules);\n\t\t\t\t\t\t} else if (3 === rules[i].type) {\n\t\t\t\t\t\t\tif (rules[i].styleSheet.hasOwnProperty(\"cssRules\")) {\n\t\t\t\t\t\t\t\treadRules(rules[i].styleSheet.cssRules);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar defaultCssInjected = false;\n\n\t\t\t/**\n\t\t\t\t* Searches all css rules and setups the event listener to all elements with element query rules..\n\t\t\t\t*/\n\t\t\tthis.init = function () {\n\t\t\t\tvar animationStart = 'animationstart';\n\t\t\t\tif (typeof document.documentElement.style['webkitAnimationName'] !== 'undefined') {\n\t\t\t\t\tanimationStart = 'webkitAnimationStart';\n\t\t\t\t} else if (typeof document.documentElement.style['MozAnimationName'] !== 'undefined') {\n\t\t\t\t\tanimationStart = 'mozanimationstart';\n\t\t\t\t} else if (typeof document.documentElement.style['OAnimationName'] !== 'undefined') {\n\t\t\t\t\tanimationStart = 'oanimationstart';\n\t\t\t\t}\n\n\t\t\t\tdocument.body.addEventListener(animationStart, function (e) {\n\t\t\t\t\tvar element = e.target;\n\t\t\t\t\tvar styles = window.getComputedStyle(element, null);\n\n\t\t\t\t\tif (-1 !== styles.getPropertyValue('animation-name').indexOf('element-queries')) {\n\t\t\t\t\t\telement.elementQueriesSensor = new ResizeSensor(element, function () {\n\t\t\t\t\t\t\tif (element.elementQueriesSetupInformation) {\n\t\t\t\t\t\t\t\telement.elementQueriesSetupInformation.call();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tvar sensorStyles = window.getComputedStyle(element.resizeSensor, null);\n\t\t\t\t\t\tvar id = sensorStyles.getPropertyValue('min-width');\n\t\t\t\t\t\tid = parseInt(id.replace('px', ''));\n\t\t\t\t\t\tsetupElement(e.target, idToSelectorMapping[id]);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (!defaultCssInjected) {\n\t\t\t\t\tcssStyleElement = document.createElement('style');\n\t\t\t\t\tcssStyleElement.type = 'text/css';\n\t\t\t\t\tcssStyleElement.innerHTML = '[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}';\n\n\t\t\t\t\t//safari wants at least one rule in keyframes to start working\n\t\t\t\t\tcssStyleElement.innerHTML += '\\n@keyframes element-queries { 0% { visibility: inherit; } }';\n\t\t\t\t\tdocument.getElementsByTagName('head')[0].appendChild(cssStyleElement);\n\t\t\t\t\tdefaultCssInjected = true;\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, j = document.styleSheets.length; i < j; i++) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (document.styleSheets[i].href && 0 === document.styleSheets[i].href.indexOf('file://')) {\n\t\t\t\t\t\t\tconsole.log(\"CssElementQueries: unable to parse local css files, \" + document.styleSheets[i].href);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treadRules(document.styleSheets[i].cssRules || document.styleSheets[i].rules || document.styleSheets[i].cssText);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// findElementQueriesElements();\n\t\t\t\tfindResponsiveImages();\n\t\t\t};\n\n\t\t\t/**\n\t\t\t\t* Go through all collected rules (readRules()) and attach the resize-listener.\n\t\t\t\t* Not necessary to call it manually, since we detect automatically when new elements\n\t\t\t\t* are available in the DOM. However, sometimes handy for dirty DOM modifications.\n\t\t\t\t*\n\t\t\t\t* @param {HTMLElement} container only elements of the container are considered (document.body if not set)\n\t\t\t\t*/\n\t\t\tthis.findElementQueriesElements = function (container) {\n\t\t\t\tfindElementQueriesElements(container);\n\t\t\t};\n\n\t\t\tthis.update = function () {\n\t\t\t\tthis.init();\n\t\t\t};\n\t\t};\n\n\t\tElementQueries.update = function () {\n\t\t\tElementQueries.instance.update();\n\t\t};\n\n\t\t/**\n\t\t\t* Removes all sensor and elementquery information from the element.\n\t\t\t*\n\t\t\t* @param {HTMLElement} element\n\t\t\t*/\n\t\tElementQueries.detach = function (element) {\n\t\t\tif (element.elementQueriesSetupInformation) {\n\t\t\t\t//element queries\n\t\t\t\telement.elementQueriesSensor.detach();\n\t\t\t\tdelete element.elementQueriesSetupInformation;\n\t\t\t\tdelete element.elementQueriesSensor;\n\n\t\t\t} else if (element.resizeSensor) {\n\t\t\t\t//responsive image\n\n\t\t\t\telement.resizeSensor.detach();\n\t\t\t\tdelete element.resizeSensor;\n\t\t\t}\n\t\t};\n\n\t\tElementQueries.init = function (selector, breakpoints) {\n\t\t\tif (!ElementQueries.instance) {\n\t\t\t\tElementQueries.instance = new ElementQueries();\n\t\t\t\tElementQueries.instance.init();\n\t\t\t}\n\n\t\t\tElementQueries.instance.setup(selector, breakpoints);\n\t\t};\n\n\t\tvar domLoaded = function (callback) {\n\t\t\t/* Mozilla, Chrome, Opera */\n\t\t\tif (document.addEventListener) {\n\t\t\t\tdocument.addEventListener('DOMContentLoaded', callback, false);\n\t\t\t}\n\t\t\t/* Safari, iCab, Konqueror */\n\t\t\telse if (/KHTML|WebKit|iCab/i.test(navigator.userAgent)) {\n\t\t\t\tvar DOMLoadTimer = setInterval(function () {\n\t\t\t\t\tif (/loaded|complete/i.test(document.readyState)) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t\tclearInterval(DOMLoadTimer);\n\t\t\t\t\t}\n\t\t\t\t}, 10);\n\t\t\t}\n\t\t\t/* Other web browsers */\n\t\t\telse window.onload = callback;\n\t\t};\n\n\t\tElementQueries.findElementQueriesElements = function (container) {\n\t\t\tElementQueries.instance.findElementQueriesElements(container);\n\t\t};\n\n\t\tElementQueries.listen = function () {\n\t\t\tdomLoaded(ElementQueries.init);\n\t\t};\n\n\t\treturn ElementQueries;\n\n\t}));"]}