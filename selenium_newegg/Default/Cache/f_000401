{"version":3,"sources":["../../../Content/ContentCast/Inline/src/utils.js","../../../Content/ContentCast/Inline/src/comparisontable.js","../../../Content/ContentCast/Inline/src/compatibleitems.js","../../../Content/ContentCast/Inline/src/accordion.js","../../../Content/ContentCast/Inline/src/faq.js","../../../Content/ContentCast/Inline/src/common.js","../../../Content/ContentCast/Inline/src/video.js","../../../Content/ContentCast/Inline/src/lightbox.js","../../../Content/ContentCast/Inline/src/featurecarousel.js","../../../Content/ContentCast/Inline/src/mobileimages.js","../../../Content/ContentCast/Inline/src/features.js","../../../Content/ContentCast/Inline/src/footnotes.js","../../../Content/ContentCast/Inline/src/gallery/consts.js","../../../Content/ContentCast/Inline/src/swipe.js","../../../Content/ContentCast/Inline/src/gallery/base.js","../../../Content/ContentCast/Inline/src/gallery/ribbon.js","../../../Content/ContentCast/Inline/src/gallery/cloud.js","../../../Content/ContentCast/Inline/src/gallery/factory.js","../../../Content/ContentCast/Inline/src/hotspots.js","../../../Content/ContentCast/Inline/src/jumplinks.js","../../../Content/ContentCast/Inline/src/specs.js","../../../Content/ContentCast/Inline/src/spin.js","../../../Content/ContentCast/Inline/src/augmentedreality.js","../../../Content/ContentCast/Inline/src/sandisk/capacity.js","../../../Content/ContentCast/Inline/src/sandisk/range.js","../../../Content/ContentCast/Inline/src/main.js","../../../Content/ContentCast/Inline/src/bazaar.js","../../../Content/ContentCast/Inline/src/gallery.js"],"names":["c","ensureStyleLoaded","hiddenHrefLinks","clickableClass","urlAttr","isMobile","ccs_util","keepFocus","_ccs_util","apply","arguments","restoreHref","$container","find","addBack","each","$link","$","this","url","attr","removeAttr","addClass","ensureStyles","height","bindResizeEvent","func","window","matchMedia","addListener","on","isElementInViewport","element","spread","$element","length","windowsHeight","viewportScrollTop","scrollTop","areaTop","areaBottom","elementTop","offset","top","is","dispatchEvent","logCall","action","actionContext","eventType","clientParams","makeClientParams","ccs_cc_log","$parentSection","closest","ElementIds","elementContext","ElementContext","Action","isPlainObject","JSON","stringify","ActionContext","Et","updateOnVisible","$ep","elements","callback","timeout","toArray","Array","isArray","i","updateOnVisibleImpl","console","error","setTimeout","babelHelpers","toConsumableArray","comparisontable","options","comparisonTable","tableId","$table","concat","onVisible","$row","$titleCell","$img","setRowHeight","complete","trigger","updateRowsHeight","timer","update","clearTimeout","styles","style","setProperty","$imgCells","has","imgWidth","Math","min","map","_","el","offsetWidth","fixImageWidth","require","detectFeatures","altText","index","$cell","img","initScript","Function","initCells","comparisonTableImage","paddingTop","parseInt","css","paddingBottom","cellHeight","appendTo","compatibleItemsSelector","compatibleItemsExpandLinkSelector","headerSelector","contentSelector","stateAttr","expanded","collapsed","ariaStateAttr","init","$header","changeState","e","undefined","originalEvent","stopPropagation","o","withAnimation","expand","initialState","targetState","accordion","expandedText","collapsedText","$content","parent","children","slideDown","slideUp","context","type","data","title","$area","state","filter","add","toggle","faqSectionSelector","sectionWithVideo","sectionHeader","sectionContent","faq","ep","$faq","initAccordion","currentTarget","delegateTarget","$playerContainer","player","ccsVideoPlayer","pause","initPlayPauseVideo","common","rootSelector","sectionSelector","mediaTypeAttr","embeddedVideoSelector","noAutoplaySelector","imageSelector","videoSelector","cartCookie","playerSelector","buyRootSelector","buyVisibleClass","cartButtonSuffix","closeButtonSuffix","settings","reinit","$wrapper","tracking","Element","getTrackingParams","initInline","pluginPath","disableCC","mute","playOnInit","initByAutoplay","playerId","file","transcodedFile","image","ccUrl","ccLang","width","volume","debug","$el","videoData","getLogFunc","errorLogCall","utils","extend","initBuyButton","product","cookieStr","cname","name","ca","decodeURIComponent","document","cookie","split","charAt","substring","indexOf","parse","stopHandler","showOverlay","$player","$cartButton","createButton","addToCartHtml","masterId","$closeButton","append","cvalue","exdays","d","Date","setTime","getTime","toUTCString","off","removeClass","$floatButton","clone","getSrc","pos","round","getCurrentPosition","target","html","suffix","text","buttonClass","$button","lightbox","$mediaElements","overrides","disabled","preventDefault","config","smallBtn","loop","autoFocus","isRtl","touch","baseClass","containerClass","beforeLoad","instance","current","opts","$orig","mediaType","contentType","src","afterLoad","isImage","bind","addPoweredByLogo","poweredByLogoUrl","alt","caption","$image","currIndex","firstRun","beforeShow","prevIndex","direction","subelement","scroll","afterShow","enableAutosize","video","initVideo","focus","$refs","container","btnTpl","arrowRight","fancybox","defaults","arrowLeft","initFancybox","carouselWrapperSelector","carouselSelector","activeSlideSelector","clonedSlideSelector","customControls","bgFeatureSelector","playPauseBtnSelector","fcArrows","selector","next","prev","FeatureCarousel","features","carousel","autoplaySpeed","speed","showArrows","arrows","showDots","points","isAutoplay","isAutoplayEnabled","toggleClass","$slickWrapper","$customControls","playpause","remove","ccsSlick","dots","slidesToScroll","autoplay","lazyLoad","pauseOnHover","infinite","draggable","rtl","swipe","appendDots","prevArrow","nextArrow","slick","currentSlideIndex","currentSlide","initBackGroundVideoAutoPlay","$self","reportingListener","initPlayPauseBtn","fancyboxListener","hoverListener","turnOff","event","$targerElement","relatedTarget","hasClass","submitNavigateEvent","addEventListener","iteraction","curSlide","eventParams","triggeredby","nextSlide","previousSlide","$btnPlayPause","submitClickEvent","$bgContainer","$bgVideo","play","prop","click","eventName","imageModeAttr","headerImageSelector","mobileImages","trackedImages","get","—Åheck","RegExp","swapBreakpoint","handler","breakpoints","mobile","match","images","mode","$a","$baseNode","hasAttribute","changeMode","actualSrc","pickAttribute","swapAttributes","altValue","splice","swapImages","$headerImage","showHeader","fallbackAttr","altAttr","altAttrValue","mobilePrintingVideo","featureDescription","Carousel","initCarousel","$featureImages","inlineZoomSettings","zoom","enabled","body","zoomSettings","disablewheel","magnifycursor","showstatus","originalsize","viewport","classmagnifier","classcursorshade","classstatusdiv","classtextdn","classtracker","onShow","setting","largeimage","isNumeric","magnifiersize","getInlineZoomSettings","one","clientWidth","naturalWidth","before","imagezoomsl","initFeaturesZoom","keyCode","initEmbeddedVideo","lazyLoadImages","startImagesLoading","disableLazyLoad","removeEventListener","isVisible","initFeaturesLazyLoad","$label","id","checkInputLabels","autoPlayVideoInViewPort","not","initAutoPlay","$bg","$video","poster","linkClass","footnoteSupLinkSelector","footnoteIdAttr","offScreenTextClass","footnotes","footnoteIdSelector","$footnote","$footnoteAnchors","item","$footNote","icId","inlineContentId","refId","href","prepend","footer","anchorOffScreenText","updateLink","$footerLink","noteId","$footnoteLinkCandidate","trim","$contentLink","createCrossLink","createContentLink","createFooterLink","createNewLink","expandAccordion","isFooterLink","prefix","startX","startY","c$a","slickDefaults","rootGallerySelector","thumbsContainer","slideSelector","viewportWrapperClass","viewportPreviewClass","cloudRoot","cloudViewport","cloudViewportArrow","cloudActiveClass","BaseGallery","$gallery","$slick","updateAttributes","beforeInit","initSlick","afterInit","gallery","resizeTimer","resizeInvoker","resize","$slides","backFocus","fbSlide","$slide","slickConfig","elementId","_ccs_util3","stringFormat","toLowerCase","slickSize","$list","slideSize","outerWidth","slidesCount","calcCount","slidesToShow","listWidth","slickSetSlidesCount","wrapSize","max","floor","count","slickSetOption","refresh","slide","RibbonGallery","loadImages","switchSlide","changeSlidesCount","goTo","isMoving","detectSwipe","version","documentElement","threshold","onTouchEnd","onTouchMove","stopImmediatePropagation","dir","x","touches","pageX","y","pageY","dx","dy","abs","call","onTouchStart","special","setup","teardown","noop","CloudGallery","insertAfter","initMobileBehavior","initDesktopBehavior","initSingleSlideBehavior","$viewportSlideWrapper","$viewportSlidePreview","$curSlide","$newSlide","submitNavigateViewportEvent","navOnHoverTimer","$arrow","changeHeight","suppressLog","isHidden","slideIsHidden","$prevActive","submitHoverEvent","$viewport","siblings","_$$ccsVideoPlayer","stopPlayer","$viewportSlide","createViewportSlide","left","$slickSlide","imgUrl","replace","media","zoomIn","showLargeImg","$viewportWrapper","$viewportImage","createImageViewportSlide","createVideoViewportSlide","copyDataAttributes","initPlayer","$source","$target","grep","attributes","at","test","value","curHeight","maxHeight","newHeight","GalleryFactory","Gallery","Ribbon","Cloud","rootClass","mobileClass","noScrollClass","pointClass","pointActiveClass","pointSize","tooltipTheme","tooltipsContainerClass","tooltipClass","videoPlayerClass","productTooltipClass","productPriceClass","productCartClass","customCartClass","loadingClass","defaultOptions","size","iconSet","hotspots","$images","fn","qtip","zindex","modal_zindex","$body","buildOptions","warn","wrap","hotspot","mediaUrl","previewUrl","initMobile","forEach","openTime","position","my","method","getPosition","isProduct","closeButtonBlockTime","insertBefore","prerender","content","$wrap","buildMediaContent","description","crossSell","price","showLinkWithPrice","parsingJs","wrapIntoProductLink","priceFallbackText","$block","buildProductPrice","addToCart","hideAtcOnInit","showAddToCartWithPrice","isCustom","dispatchConversionEvent","buildProductAddToCart","buildProductContent","buildContent","button","show","modal","hide","fixed","delay","classes","effect","adjust","events","render","api","tooltip","getPlayer","mejs","exitFullScreen","renderMobile","transcodedUrl","autoplayVideo","renderVideo","$tooltip","apiUrl","CcsLogoProgram","requestPrice","response","result","renderProduct","point","blur","screenSize","innerWidth","screen","innerHeight","clientHeight","margin","getScreenSize","set","$w","scrollLeft","getScreenCenter","s","h","max-width","max-height","resetSize","setMobileVideoSize","closeButton","setMobileDefaultSize","showMobile","dispatchPopupEvent","visible","qty","keyup","initHotspot","initMainImage","mainImage","toFixed","$eventTargets","$span","logData","areaSelector","anchorIdAttr","holderSelector","itemClass","separatorClass","textAttr","hiddenAttr","specsArea","showButton","hideButton","expandableSpecs","specRow","animate","spinSelector","preloadLayer","preloadContainer","toolbox","playPauseBtn","defaultSliderHeight","slider","spritespinImageSelector","spritespin","source","$toolbox","toolboxId","$rootDiv","$playPauseBtn","defaultWidth","defaultHeight","$preloadContainer","completeCallback","Image","onload","calculatedWidth","calculatedHeight","isFunction","calculateImageDimensions","containerWidth","imageWidth","imageHeight","calculateContainerHeight","onWindowResize","spriteSpinApi","which","changePlayPauseState","logChangeState","runInitialization","isPlaying","cssSelector","stopAnimation","startAnimation","resizeToolbox","initControl","firstTime","$slider","fps","rate","$spritespinDiv","$spritespinContainer","$preloadDiv","animated","rateFramesCount","rateCounter","frameTime","frames","framesX","renderer","reverse","onLoad","ui","updateFrame","stop","logRotate","onFrame","frame","onDraw","setImageAltText","playTrigger","mousedown","buttons","$rootContainer","widthToSet","heightToSet","logEvent","arSectionSelector","arFancyBoxContent","animationList","augmentedreality","customElements","$thumbnailCnt","$viewerCnt","augmentedReality","autoLoad","loadModelViewer","launchInLightbox","fbContent","setViewerHandler","ar","aspectRatio","ajustLightBoxSize","open","$viewer","message","detail","getErrorMessage","status","activateAR","viewer","animation","playEvent","animationNameList","setAnimationName","setChangeAnimationEvent","launchAutoplayAnimation","loadAnimation","changeEvent","setInterval","availableAnimations","currentAnimationNameIndex","newAnimationName","repeat","currentTime","currentColumnCount","containerSelector","widthBoundaryMedium","widthBoundaryWide","$chart","swipeToSlide","refreshSlick","$chartContent","initImpl","targetColumnCount","getTargetColumnCount","columnCount","Number","POSITIVE_INFINITY","slideCount","tabSelector","sectionActiveClass","contentsSelector","returnScrollToTitle","iframe","preload","toolbar","inner","bazaar","$compatibleItems","compatibleitems","factory","create","jumplinks","jumplinksHtml","$jumplinkArea","anchorId","$currentJumplinkItem","$specsArea","$specsShowButton","$specsHideButton","$expandableSpecs","pop","shift","specs","spin","capacityChart","rangeChart","initVideoByButton","initDocumentsReporting","_ccs_util2","initViewportEvent","$acc","initSectionViewportReporting","fixInvoker"],"mappings":"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","file":"inline.min.js","sourcesContent":["Ôªøimport $ from \"jquery\";\r\n\r\nconst c = {\r\n\tensureStyleLoaded: \".ccs-cc-inline-ensure-style-loaded\",\r\n\thiddenHrefLinks: \"a[data-url]\",\r\n\tclickableClass: \"ccs-cc-inline-clickable\",\r\n\turlAttr: \"data-url\"\r\n};\r\n\r\nexport function isMobile() {\r\n\treturn ccs_util.isMobile();\r\n}\r\n\r\nexport function keepFocus() {\r\n\treturn ccs_util.keepFocus(...arguments);\r\n}\r\n\r\nexport function initViewportEvent() {\r\n\treturn ccs_util.initViewportEvent(...arguments);\r\n}\r\n\r\nexport function stringFormat() {\r\n\treturn ccs_util.stringFormat(...arguments);\r\n}\r\n\r\nexport function restoreHref($container) {\r\n\r\n\t$container\r\n\t\t.find(c.hiddenHrefLinks)\r\n\t\t.addBack(c.hiddenHrefLinks)\r\n\t\t.each(function () {\r\n\t\t\tconst $link = $(this);\r\n\t\t\tconst url = $link.attr(c.urlAttr);\r\n\r\n\t\t\t$link\r\n\t\t\t\t.attr(\"href\", url)\r\n\t\t\t\t.removeAttr(c.urlAttr)\r\n\t\t\t\t.addClass(c.clickableClass);\r\n\t\t});\r\n}\r\n\r\nexport function ensureStyles($container) {\r\n\treturn $container.find(c.ensureStyleLoaded).height() > 0;\r\n}\r\n\r\nexport function bindResizeEvent(func) {\r\n\r\n\tif (isMobile()) {\r\n\t\twindow\r\n\t\t\t.matchMedia(\"(orientation: portrait)\")\r\n\t\t\t.addListener(func);\r\n\t} else {\r\n\t\t$(window).on(\"resize\", func);\r\n\t}\r\n}\r\n\r\nexport function isElementInViewport(element, spread) {\r\n\r\n\tspread = spread || 0;\r\n\r\n\tconst $element = $(element);\r\n\tif ($element.length === 0) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tconst windowsHeight = $(window).height();\r\n\tconst viewportScrollTop = $(window).scrollTop();\r\n\r\n\tconst areaTop = viewportScrollTop < spread ? 0 : viewportScrollTop - spread;\r\n\tconst areaBottom = viewportScrollTop + windowsHeight + spread;\r\n\r\n\tconst elementTop = $element.offset().top;\r\n\tconst elementBottom = elementTop + $element.height();\r\n\r\n\treturn elementBottom <= areaBottom\r\n\t\t&& elementTop >= areaTop\r\n\t\t&& $element.is(\":visible\");\r\n}\r\n\r\nexport function dispatchEvent(logCall, element, action, actionContext, eventType) {\r\n\tconst clientParams = makeClientParams(element, action, actionContext, eventType);\r\n\tccs_cc_log.dispatchEvent(logCall, clientParams);\r\n}\r\n\r\nexport function makeClientParams(element, action, actionContext, eventType) {\r\n\tconst clientParams = {};\r\n\tconst $parentSection = $(element).closest(\"[data-elementid]\");\r\n\r\n\tclientParams.ElementIds = $parentSection.attr(\"data-elementid\");\r\n\r\n\tconst elementContext = $parentSection.attr(\"data-context\");\r\n\tif (elementContext) {\r\n\t\tclientParams.ElementContext = elementContext;\r\n\t}\r\n\r\n\tif (action) {\r\n\t\tclientParams.Action = action;\r\n\t}\r\n\r\n\tif (actionContext) {\r\n\t\tif ($.isPlainObject(actionContext)) {\r\n\t\t\tactionContext = JSON.stringify(actionContext);\r\n\t\t}\r\n\r\n\t\tclientParams.ActionContext = actionContext;\r\n\t}\r\n\r\n\tif (eventType) {\r\n\t\tclientParams.Et = eventType;\r\n\t}\r\n\r\n\treturn clientParams;\r\n}\r\n\r\n// https://www.w3schools.com/js/js_cookies.asp\r\nexport function setCookie(cname, cvalue, exdays) {\r\n\tvar cookie = cname + \"=\" + cvalue + \";path=/\";\r\n\tif (exdays) {\r\n\t\tconst d = new Date();\r\n\t\td.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n\r\n\t\tcookie += \";expires=\" + d.toUTCString();\r\n\t}\r\n\tdocument.cookie = cookie;\r\n}\r\n\r\nexport function getCookie(cname) {\r\n\tconst name = cname + \"=\";\r\n\tconst decodedCookie = decodeURIComponent(document.cookie);\r\n\tconst ca = decodedCookie.split(\";\");\r\n\tfor (let i = 0; i < ca.length; i++) {\r\n\t\tlet c = ca[i];\r\n\t\twhile (c.charAt(0) === \" \") {\r\n\t\t\tc = c.substring(1);\r\n\t\t}\r\n\t\tif (c.indexOf(name) === 0) {\r\n\t\t\treturn c.substring(name.length, c.length);\r\n\t\t}\r\n\t}\r\n\treturn \"\";\r\n}\r\n// end cookie\r\n\r\nexport function fixBlockWidth($ep) {\r\n\tvar $block = $ep,\r\n\t\ttimer;\r\n\r\n\tif ($block.closest(\"td\").length) {\r\n\t\tconst fixInvoker = function () {\r\n\t\t\tif ($block.is(\":visible\")) {\r\n\t\t\t\t$block.css(\"position\", \"absolute\");\r\n\r\n\t\t\t\tconst width = $block.parent().width();\r\n\t\t\t\tif (width !== 0) {\r\n\t\t\t\t\t$block.width(width);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$block.css(\"position\", \"\");\r\n\t\t\t} else {\r\n\t\t\t\tclearTimeout(timer);\r\n\t\t\t\ttimer = setTimeout(fixInvoker, 300);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tbindResizeEvent(fixInvoker);\r\n\t\tfixInvoker.call();\r\n\t}\r\n}\r\n\r\nexport function updateOnVisible($ep, elements, callback, timeout) {\r\n\r\n\tif (!$ep || typeof callback !== \"function\") {\r\n\t\tconsole.error(\"updateOnVisible: '$ep' or 'callback' parameters are not defined\");\r\n\t\treturn;\r\n\t}\r\n\r\n\telements = elements || $ep;\r\n\ttimeout = timeout || 300;\r\n\r\n\tif (typeof elements === \"string\") {\r\n\t\telements = $ep.find(elements);\r\n\t}\r\n\r\n\tif (elements instanceof $) {\r\n\t\telements = elements.toArray();\r\n\t}\r\n\r\n\tif (!Array.isArray(elements)) {\r\n\t\telements = [elements];\r\n\t}\r\n\r\n\tfor (let i = 0; i < elements.length; i++) {\r\n\t\tupdateOnVisibleImpl($ep, elements[i], callback, timeout);\r\n\t}\r\n}\r\n\r\nfunction updateOnVisibleImpl($ep, element, callback, timeout) {\r\n\tconst $el = $(element);\r\n\r\n\tif ($el.is(\":visible\") && ensureStyles($ep)) {\r\n\t\tcallback(element);\r\n\r\n\t} else {\r\n\t\tsetTimeout(() => updateOnVisibleImpl(...arguments), timeout);\r\n\t}\r\n}\r\n","Ôªøimport $ from \"jquery\";\r\nimport require from \"require\";\r\nimport { bindResizeEvent } from \"./utils\";\r\n\r\nexport default function (options) {\r\n\tif (!options.comparisonTable) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst tableId = options.comparisonTable.tableId;\r\n\tconst $table  = $(`#${tableId}`);\r\n\r\n\t(function onVisible() {\r\n\t\tif ($table.is(\":visible\")) {\r\n\t\t\tupdateRowsHeight($table);\r\n\t\t\tfixImageWidth($table);\r\n\t\t} else {\r\n\t\t\tsetTimeout(onVisible, 100);\r\n\t\t}\r\n\t}());\r\n\r\n\trequire(\"logoProgram\").detectFeatures(tableId);\r\n\r\n\tinitCells($table, options.comparisonTable.comparisonTableImage);\r\n}\r\n\r\nfunction updateRowsHeight($table) {\r\n\t$table.find(\"tr\").each(function () {\r\n\t\tconst $row = $(this);\r\n\t\tconst $titleCell = $row.find(\"td:first\");\r\n\r\n\t\tconst $img = $titleCell.find(\"img\");\r\n\r\n\t\tif ($img.length > 0) {\r\n\t\t\t$img.on(\"load\", function () {\r\n\t\t\t\tsetRowHeight($titleCell, $row);\r\n\t\t\t}).each(function () {\r\n\t\t\t\tthis.complete && $(this).trigger(\"load\");\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tsetRowHeight($titleCell, $row);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction setRowHeight($titleCell, $row) {\r\n\tconst paddingTop = parseInt($titleCell.css(\"paddingTop\"));\r\n\tconst paddingBottom = parseInt($titleCell.css(\"paddingBottom\"));\r\n\tconst cellHeight = $titleCell.height();\r\n\r\n\tconst titleCellHeight = cellHeight + paddingTop + paddingBottom;\r\n\r\n\t$(`<td style=\"padding: 0; height: ${titleCellHeight}px;\"></td>`).appendTo($row);\r\n}\r\n\r\nfunction initCells($table, altText) {\r\n\t$table\r\n\t\t.find(\".ccs-cc-comparison-table-cell-content\")\r\n\t\t.each(function (index) {\r\n\t\t\tconst $cell = $(this);\r\n\r\n\t\t\tif ($cell.find(\"td div\").has(\"img\")) {\r\n\t\t\t\tvar img = $cell.find(\"img\");\r\n\t\t\t\t$(img).attr(\"alt\", `${altText} ${index + 1}`);\r\n\t\t\t}\r\n\r\n\t\t\tconst initScript = $cell.attr(\"data-cell-init-script\");\r\n\t\t\tif (initScript && initScript.length) {\r\n\t\t\t\tnew Function(initScript)();\r\n\t\t\t}\r\n\t\t});\r\n}\r\n\r\n// CCSDT-7756\r\nfunction fixImageWidth($table) {\r\n\tlet timer;\r\n\r\n\tfunction update() {\r\n\t\tif (!$table.is(\":visible\")) {\r\n\t\t\tclearTimeout(timer);\r\n\t\t\ttimer = setTimeout(() => update(), 300);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst styles = $table[0].style;\r\n\r\n\t\tstyles.setProperty(\"--table-img-width\", \"100%\");\r\n\r\n\t\tconst $imgCells = $table.find(\".ccs-cc-comparison-table-header-row td:not(:first) div\").has(\"img\");\r\n\t\tconst imgWidth = Math.min(...$imgCells.map((_, el) => el.offsetWidth).toArray());\r\n\r\n\t\tstyles.setProperty(\"--table-img-width\", imgWidth + \"px\");\r\n\t}\r\n\r\n\tsetTimeout(() => update());\r\n\tbindResizeEvent(() => update());\r\n}\r\n","Ôªøimport \"jquery\";\r\n\r\nconst c = {\r\n\tcompatibleItemsSelector: \".ccs-cc-inline-section.ccs-cc-inline-compatibleitems\",\r\n\tcompatibleItemsExpandLinkSelector: \".ccs-cc-inline-compatibleitems-expand-link\"\r\n};\r\n\r\nexport default function (ep) {\r\n\tconst $compatibleItems = ep.find(c.compatibleItemsSelector);\r\n\r\n\tconst $compatibleItemsExpandLink = $compatibleItems.find(c.compatibleItemsExpandLinkSelector);\r\n\r\n\t$compatibleItemsExpandLink.on(\"click\", () => {\r\n\t\tif (!$compatibleItems.hasClass(\"ccs-cc-inline-compatibleitems-expanded\")) {\r\n\t\t\t$compatibleItems.addClass(\"ccs-cc-inline-compatibleitems-expanded\");\r\n\t\t}\r\n\t});\r\n}\r\n","Ôªøimport $ from \"jquery\";\r\nimport { dispatchEvent } from \"./utils\";\r\n\r\nconst c = {\r\n\theaderSelector: \".ccs-cc-inline-acc-header\",\r\n\tcontentSelector: \".ccs-cc-inline-acc-content\",\r\n\tstateAttr: \"data-ccs-cc-inline-acc-state\",\r\n\texpanded: \"expanded\",\r\n\tcollapsed: \"collapsed\",\r\n\tariaStateAttr: \"aria-expanded\"\r\n};\r\n\r\nexport function init($container, options) {\r\n\t$container.find(c.headerSelector).each(function () {\r\n\t\tconst $header = $(this);\r\n\r\n\t\tchangeState($header, options, false, $header.attr(c.stateAttr) === c.expanded);\r\n\t});\r\n\r\n\t$container.on(\"click\",\r\n\t\tc.headerSelector,\r\n\t\tfunction (e) {\r\n\t\t\tchangeState($(this), options, e.originalEvent !== undefined);\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\t);\r\n}\r\n\r\nfunction changeState($header, o, withAnimation, expand) {\r\n\r\n\tlet initialState;\r\n\r\n\tif (expand === undefined) { // not initialization\r\n\t\tinitialState = $header.attr(c.stateAttr);\r\n\t\texpand = initialState !== c.expanded;\r\n\t}\r\n\r\n\t$header.attr(c.ariaStateAttr, expand);\r\n\tconst targetState = expand ? c.expanded : c.collapsed;\r\n\r\n\tif (initialState === targetState) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t$header\r\n\t\t.attr(c.stateAttr, targetState)\r\n\t\t.attr(\"aria-label\", `${$header.attr(\"title\")} ${expand ? o.accordion.expandedText : o.accordion.collapsedText}`);\r\n\r\n\tconst $content = $header.parent().parent().children(c.contentSelector);\r\n\r\n\tif (expand) {\r\n\t\twithAnimation ? $content.slideDown() : $content.css(\"display\", \"block\");\r\n\t\t$content.trigger(\"accordionOpen\");\r\n\t}\r\n\telse {\r\n\t\twithAnimation ? $content.slideUp() : $content.css(\"display\", \"none\");\r\n\t\t$content.trigger(\"accordionClose\");\r\n\t}\r\n\r\n\tif (initialState === undefined) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst context = {\r\n\t\ttype: `section-${targetState === c.expanded ? \"open\" : \"close\"}`\r\n\t};\r\n\r\n\tconst index = $header.data(\"index\");\r\n\tif (index) {\r\n\t\tcontext.index = index;\r\n\t\tcontext.title = $header.attr(\"title\");\r\n\t}\r\n\r\n\tdispatchEvent(o.logCall, $header, \"feature-click\", context);\r\n}\r\n\r\nexport function expand($area) {\r\n\ttoggle($area, c.expanded);\r\n}\r\n\r\nexport function collapse($area) {\r\n\ttoggle($area, c.collapsed);\r\n}\r\n\r\nfunction toggle($area, state) {\r\n\tconst $header = $area.filter(c.headerSelector).add($area.find(c.headerSelector));\r\n\r\n\tif ($header.length > 0 && $header.attr(c.stateAttr) !== state) {\r\n\t\t$header.trigger(\"click\");\r\n\t}\r\n}","Ôªøimport $ from \"jquery\";\r\nimport { init as initAccordion } from \"./accordion\";\r\n\r\nconst c = {\r\n\tfaqSectionSelector: \".ccs-cc-inline-faq .ccs-cc-inline-features\",\r\n\tstateAttr: \"data-ccs-cc-inline-acc-state\",\r\n\texpanded: \"expanded\",\r\n\tcollapsed: \"collapsed\",\r\n\tsectionWithVideo: \".ccs-cc-inline-faq-item:has(.ccs-cc-inline-embedded-video)\",\r\n\tsectionHeader: \".ccs-cc-inline-acc-header\",\r\n\tsectionContent: \".ccs-cc-inline-acc-content\"\r\n};\r\n\r\nexport default function (ep, options) {\r\n\tconst $faq = ep.find(c.faqSectionSelector);\r\n\tinitAccordion($faq, options);\r\n\tinitPlayPauseVideo($faq);\r\n}\r\n\r\nfunction initPlayPauseVideo($faq) {\r\n\tconst $videoSections = $faq.find(c.sectionWithVideo);\r\n\r\n\t$videoSections.on(\"click\", c.sectionHeader, function (e) {\r\n\t\tif ($(e.currentTarget).attr(c.stateAttr) === c.collapsed) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst $content = $(e.delegateTarget).find(c.sectionContent);\r\n\t\tconst $playerContainer = $content.find(\"div[data-player]\");\r\n\t\tconst player = $playerContainer.ccsVideoPlayer(\"getPlayer\");\r\n\t\tif (player == null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tplayer.pause();\r\n\t});\r\n}\r\n","Ôªøexport default {\r\n\trootSelector: \".ccs-cc-inline\",\r\n\tsectionSelector: \".ccs-cc-inline-section\",\r\n\tmediaTypeAttr: \"data-media-type\",\r\n\r\n\t// features, video\r\n\tembeddedVideoSelector: \".ccs-cc-inline-embedded-video\",\r\n\tnoAutoplaySelector: \".ccs-cc-inline-noautoplay\",\r\n\r\n\t// images\r\n\timageSelector: \".ccs-cc-inline-thumbnail a.ccs-cc-inline-thumbnail-image\",\r\n\r\n\t// videos\r\n\tvideoSelector: \".ccs-cc-inline-thumbnail a.ccs-cc-inline-thumbnail-video\"\r\n};\r\n","Ôªøimport $ from \"jquery\";\r\nimport common from \"./common\";\r\nimport * as utils from \"./utils\";\r\n\r\nimport \"videoPlayer\";\r\n\r\nconst c = {\r\n\tcartCookie: \"ccs_video_cart\",\r\n\tplayerSelector: \".mejs__container\",\r\n\tbuyRootSelector: \".ccs-video-buy\",\r\n\tbuyVisibleClass: \"ccs-video-buy-visible\",\r\n\tcartButtonSuffix: \"cart\",\r\n\tcloseButtonSuffix: \"close\"\r\n};\r\n\r\n$.extend(c, common);\r\n\r\nexport function init(element, logCall, settings, reinit) {\r\n\tconst $wrapper = $(element);\r\n\r\n\tconst player = $wrapper.ccsVideoPlayer(\"getPlayer\");\r\n\tif (player && !reinit) {\r\n\t\treturn player;\r\n\t}\r\n\r\n\tif (settings.tracking instanceof Element || settings.tracking instanceof $) {\r\n\t\tsettings.tracking = getTrackingParams(settings.tracking, logCall);\r\n\t}\r\n\r\n\tif (!settings.tracking) {\r\n\t\tsettings.tracking = getTrackingParams($wrapper, logCall);\r\n\t}\r\n\r\n\treturn $wrapper.ccsVideoPlayer(settings);\r\n}\r\n\r\nexport function initInline(element, logCall, pluginPath, disableCC, mute, playOnInit, initByAutoplay) {\r\n\tconst $wrapper = $(element);\r\n\r\n\tconst playerId = $wrapper.data(\"player\");\r\n\r\n\tconst settings = {\r\n\t\tplayerId: playerId,\r\n\t\tfile: $wrapper.data(\"video-url\"),\r\n\t\ttranscodedFile: $wrapper.data(\"transcoded-video-url\"),\r\n\t\timage: $wrapper.data(\"image-url\"),\r\n\t\tccUrl: $wrapper.data(\"cc-url\"),\r\n\t\tccLang: $wrapper.data(\"cc-lang\"),\r\n\t\theight: $wrapper.data(\"media-height\") || \"100%\",\r\n\t\twidth: $wrapper.data(\"media-width\") || \"100%\",\r\n\t\tplayOnInit: playOnInit,\r\n\t\tinitByAutoplay: !!initByAutoplay,\r\n\t\tmute: mute,\r\n\t\tvolume: 80,\r\n\t\tdebug: true,\r\n\t\tpluginPath: pluginPath,\r\n\t\tdisableCC: disableCC\r\n\t};\r\n\r\n\treturn init($wrapper, logCall, settings);\r\n}\r\n\r\nexport function stop() {\r\n\t$.ccsVideoPlayer.stopPlayer(...arguments);\r\n}\r\n\r\nexport function autoPlayInViewport(ep, logCall, pluginPath, disableCC) {\r\n\tconst $ep = ep;\r\n\r\n\tif (!utils.isMobile()) {\r\n\t\tsetTimeout(function () {\r\n\t\t\t$ep.find(c.embeddedVideoSelector)\r\n\t\t\t\t.not(c.noAutoplaySelector + \" \" + c.embeddedVideoSelector)\r\n\t\t\t\t.each(function () {\r\n\r\n\t\t\t\t\tconst $el = $(this);\r\n\r\n\t\t\t\t\tconst settings = {\r\n\t\t\t\t\t\tinitByAutoplay: true,\r\n\t\t\t\t\t\tmute: true,\r\n\t\t\t\t\t\tpluginPath: pluginPath,\r\n\t\t\t\t\t\tdisableCC: disableCC,\r\n\t\t\t\t\t\ttracking: getTrackingParams($el, logCall)\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$.ccsVideoPlayer.initAutoPlay($el, settings);\r\n\t\t\t\t});\r\n\t\t}, 1500);\r\n\t}\r\n}\r\n\r\nfunction getTrackingParams($el, logCall) {\r\n\treturn {\r\n\t\tlogCall: videoData => getLogFunc($el, logCall, videoData),\r\n\t\terrorLogCall: videoData => getLogFunc($el, logCall, videoData, \"error\", \"Submit\")\r\n\t};\r\n}\r\n\r\nfunction getLogFunc($el, logCall, videoData, action, eventType) {\r\n\tconst clientParams = utils.makeClientParams($el, action, eventType);\r\n\r\n\t$.extend(clientParams, videoData);\r\n\r\n\tccs_cc_log.dispatchEvent(logCall, clientParams);\r\n}\r\n\r\nexport function initBuyButton(options) {\r\n\r\n\tconst o = options.product;\r\n\tif (!o) return;\r\n\r\n\tconst cookieStr = utils.getCookie(c.cartCookie);\r\n\tconst cookie = cookieStr ? JSON.parse(cookieStr) : {};\r\n\r\n\tconst showOverlay = function (e) {\r\n\t\t$(`#${e.player.playerId}`)\r\n\t\t\t.closest(c.playerSelector)\r\n\t\t\t.find(c.buyRootSelector)\r\n\t\t\t.addClass(c.buyVisibleClass);\r\n\t};\r\n\r\n\tconst stopHandler = function (e) {\r\n\t\tif (e.originalEvent.type === \"ended\") {\r\n\t\t\tshowOverlay(e);\r\n\t\t}\r\n\t};\r\n\r\n\t$(document).on(\"ccsPlayer\",\r\n\t\tfunction (e) {\r\n\t\t\tif (e.originalEvent.type !== \"canplay\") {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst $player = $(`#${e.player.playerId}`).closest(c.playerSelector);\r\n\t\t\tif ($player.find(c.buyRootSelector).length) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst $wrapper = $(\"<div class='ccs-video-buy'>\").appendTo($player);\r\n\r\n\t\t\tconst addToCart = $(o.addToCartHtml).children(\":first\");\r\n\t\t\tconst $cartButton = createButton(addToCart, c.cartButtonSuffix);\r\n\r\n\t\t\tif (!cookie[o.masterId]) {\r\n\r\n\t\t\t\tconst $closeButton = createButton(\"<a href='javascript:;'>\", c.closeButtonSuffix);\r\n\r\n\t\t\t\t$(\"<div class='ccs-video-buy-overlay'>\")\r\n\t\t\t\t\t.append(\r\n\t\t\t\t\t\t$(\"<div class='ccs-video-buy-inner'>\").append($cartButton).append($closeButton))\r\n\t\t\t\t\t.appendTo($wrapper);\r\n\r\n\t\t\t\t$closeButton.add($cartButton)\r\n\t\t\t\t\t.on(\"click\", function () {\r\n\t\t\t\t\t\tcookie[o.masterId] = 1;\r\n\t\t\t\t\t\tutils.setCookie(c.cartCookie, JSON.stringify(cookie));\r\n\r\n\t\t\t\t\t\t$(document).off(\"ccsPlayer\", null, stopHandler);\r\n\r\n\t\t\t\t\t\t$wrapper.removeClass(c.buyVisibleClass);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t$(document).on(\"ccsPlayer\", stopHandler);\r\n\t\t\t}\r\n\r\n\t\t\tconst $floatButton = $cartButton.clone().addClass(\"ccs-video-buy-float\").appendTo($wrapper);\r\n\r\n\t\t\t$cartButton.add($floatButton).on(\"click\",\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\tconst context = JSON.stringify({\r\n\t\t\t\t\t\ttype: \"video-addtocart\",\r\n\t\t\t\t\t\turl: e.player.getSrc(),\r\n\t\t\t\t\t\tpos: Math.round(e.player.getCurrentPosition())\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tutils.dispatchEvent(options.logCall, e.target, \"conversion\", context);\r\n\t\t\t\t});\r\n\t\t});\r\n}\r\n\r\nfunction createButton(html, suffix, text) {\r\n\tconst buttonClass = \"ccs-video-buy-button\";\r\n\r\n\tconst $button = $(html);\r\n\r\n\tif (text) {\r\n\t\t$button.text(text).attr(\"title\", text);\r\n\t}\r\n\r\n\treturn $button.addClass(buttonClass + \" \" + buttonClass + \"-\" + suffix);\r\n}\r\n","Ôªøimport \"Fancybox\";\r\nimport $ from \"jquery\";\r\nimport c from \"./common\";\r\nimport { dispatchEvent, keepFocus } from \"./utils\";\r\nimport { init as initVideo } from \"./video\";\r\n\r\nconst playerId = \"ccs-cc-videoplayer\";\r\n\r\nexport default function ($mediaElements, o, overrides) {\r\n\tif (o.lightbox.disabled) {\r\n\t\t$mediaElements.on(\"click\", e => {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tinitFancybox($mediaElements, o, overrides);\r\n}\r\n\r\nfunction initFancybox($mediaElements, o, overrides) {\r\n\tconst config = {\r\n\t\tsmallBtn: false,\r\n\t\tloop: true,\r\n\t\tautoFocus: true,\r\n\t\tisRtl: o.isRtl,\r\n\t\ttouch: !o.isRtl,\r\n\t\tbaseClass: `ccs-fancybox-inline-content ${o.containerClass}`,\r\n\t\tbeforeLoad(instance, current) {\r\n\t\t\tconst $link = current.opts.$orig;\r\n\t\t\tconst mediaType = $link.attr(c.mediaTypeAttr);\r\n\r\n\t\t\tcurrent.type = mediaType; // for images without extension\r\n\r\n\t\t\tif (mediaType === \"video\") {\r\n\t\t\t\tcurrent.type = \"html\";\r\n\t\t\t\tcurrent.contentType = \"video\";\r\n\t\t\t\tcurrent.src = `<div><div id='${playerId}-${current.index}'></div></div>`;\r\n\t\t\t}\r\n\t\t},\r\n\t\tafterLoad(instance, current) {\r\n\t\t\tconst $link = current.opts.$orig;\r\n\t\t\tconst mediaType = $link.attr(c.mediaTypeAttr);\r\n\t\t\tconst isImage = mediaType === \"image\";\r\n\r\n\t\t\tif (isImage) {\r\n\t\t\t\taddPoweredByLogo(current.$content, o.lightbox.poweredByLogoUrl);\r\n\r\n\t\t\t\tconst alt = current.opts.caption || $link.find(\"img\").attr(\"alt\");\r\n\t\t\t\tcurrent.$image.attr(\"alt\", alt);\r\n\r\n\t\t\t\tif (instance.currIndex === current.index && instance.firstRun) {\r\n\t\t\t\t\tdispatchEvent(o.logCall, $link, \"zoom-in\", { type: mediaType, url: current.src });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tbeforeShow(instance, current) {\r\n\t\t\tif (instance.currIndex === instance.prevIndex) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst $link = current.opts.$orig;\r\n\t\t\tconst direction = instance.currIndex - instance.prevIndex;\r\n\r\n\t\t\tconst context = {\r\n\t\t\t\tsubelement: \"lightbox\",\r\n\t\t\t\tscroll: direction > 0 ^ o.isRtl ? \"right\" : \"left\",\r\n\t\t\t\ttarget: instance.currIndex\r\n\t\t\t};\r\n\r\n\t\t\tdispatchEvent(o.logCall, $link, \"navigate-content\", context);\r\n\t\t},\r\n\t\tafterShow(instance, current) {\r\n\t\t\tconst $link = current.opts.$orig;\r\n\t\t\tconst mediaType = $link.attr(c.mediaTypeAttr);\r\n\r\n\t\t\tif (mediaType === \"video\") {\r\n\t\t\t\tconst settings = {\r\n\t\t\t\t\tplayerId: playerId + \"-\" + current.index,\r\n\t\t\t\t\tfile: $link.data(\"video-url\") || $link.attr(\"href\"),\r\n\t\t\t\t\ttranscodedFile: $link.data(\"transcoded-video-url\"),\r\n\t\t\t\t\tccUrl: $link.data(\"cc-url\"),\r\n\t\t\t\t\tccLang: $link.data(\"cc-lang\"),\r\n\t\t\t\t\theight: \"100%\",\r\n\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\tenableAutosize: true,\r\n\t\t\t\t\tplayOnInit: true,\r\n\t\t\t\t\tpluginPath: o.video.pluginPath,\r\n\t\t\t\t\tdisableCC: o.video.disableCC\r\n\t\t\t\t};\r\n\r\n\t\t\t\tinitVideo($link, o.logCall, settings, true);\r\n\t\t\t}\r\n\r\n\t\t\tif (current.type === \"image\") {\r\n\t\t\t\tcurrent.$image.attr(\"tabindex\", 0);\r\n\t\t\t\tcurrent.$image.focus();\r\n\t\t\t}\r\n\r\n\t\t\tkeepFocus(instance.$refs.container[0]);\r\n\t\t}\r\n\t};\r\n\r\n\tif (o.isRtl === true) {\r\n\t\tconfig.btnTpl = {\r\n\t\t\tarrowRight: $.fancybox.defaults.btnTpl.arrowLeft,\r\n\t\t\tarrowLeft: $.fancybox.defaults.btnTpl.arrowRight\r\n\t\t};\r\n\t}\r\n\r\n\t$.extend(config, overrides);\r\n\r\n\t$mediaElements.fancybox(config);\r\n}\r\n\r\n\r\nfunction addPoweredByLogo($element, url) {\r\n\tif (!url) return;\r\n\r\n\t$(\"<div>\")\r\n\t\t.addClass(\"ccs-cc-inline-poweredby-logo\")\r\n\t\t.append(`<img src='${url}' alt='' />`)\r\n\t\t.bind(\"contextMenu\", () => false)\r\n\t\t.appendTo($element);\r\n}\r\n","Ôªøimport $ from \"jquery\";\r\nimport * as utils from \"./utils\";\r\nimport common from \"./common\";\r\nimport \"slick\";\r\n\r\nconst c = {\r\n\tcarouselWrapperSelector: \".ccs-cc-fc\",\r\n\tcarouselSelector: \".ccs-cc-fc-items\",\r\n\tactiveSlideSelector: \".ccs-slick-active\",\r\n\tclonedSlideSelector: \".ccs-slick-cloned\",\r\n\tcustomControls: \".ccs-cc-fc-custom-controls\",\r\n\tbgFeatureSelector: \".ccs-cc-inline-feature-background\",\r\n\tplayPauseBtnSelector: \".ccs-cc-fc-play-pause-btn\",\r\n\tfcArrows: {\r\n\t\tclass: \"ccs-cc-fc-arrow\",\r\n\t\tselector: \".ccs-cc-fc-arrow\",\r\n\t\tnext: \".ccs-cc-fc-arrow.ccs-slick-next\",\r\n\t\tprev: \".ccs-cc-fc-arrow.ccs-slick-prev\"\r\n\t}\r\n};\r\n\r\n$.extend(c, common);\r\n\r\nexport default class FeatureCarousel {\r\n\tconstructor(container, o) {\r\n\t\tconst _ = this;\r\n\r\n\t\t_.$container = $(container);\r\n\t\t_.settings = o.features.carousel;\r\n\t\t_.isRtl = o.isRtl;\r\n\t\t_.logCall = o.logCall;\r\n\r\n\t\t_.init();\r\n\t}\r\n\r\n\tinit() {\r\n\t\tconst _ = this;\r\n\t\tconst $container = _.$container;\r\n\t\tconst settings = _.settings;\r\n\r\n\t\tconst autoplaySpeed = settings.speed;\r\n\t\tconst showArrows = !!settings.arrows;\r\n\t\tconst showDots = !!settings.points;\r\n\r\n\t\tconst isAutoplay = _.isAutoplayEnabled();\r\n\t\tconst isMobile = utils.isMobile();\r\n\r\n\t\t$container.toggleClass(\"ccs-cc-fc-mobile\", isMobile);\r\n\r\n\t\t_.$slickWrapper = $container.find(c.carouselSelector);\r\n\t\t_.$customControls = $container.find(c.customControls);\r\n\r\n\t\tif (!showDots && !settings.playpause) {\r\n\t\t\t_.$customControls.remove();\r\n\t\t}\r\n\r\n\t\tif (!showArrows) {\r\n\t\t\t$container.find(c.fcArrows.selector).remove();\r\n\t\t}\r\n\r\n\t\t_.$slickWrapper.ccsSlick({\r\n\t\t\tautoplaySpeed: autoplaySpeed,\r\n\t\t\tspeed: isMobile ? 100 : 500,\r\n\t\t\tarrows: showArrows,\r\n\t\t\tdots: showDots,\r\n\t\t\tslidesToScroll: 1,\r\n\t\t\tautoplay: isAutoplay,\r\n\t\t\tlazyLoad: \"progressive\",\r\n\t\t\tpauseOnHover: false,\r\n\t\t\tinfinite: true,\r\n\t\t\tdraggable: false,\r\n\t\t\trtl: _.isRtl,\r\n\t\t\tswipe: isMobile,\r\n\t\t\tappendDots: _.$customControls,\r\n\t\t\tprevArrow: $container.find(c.fcArrows.prev),\r\n\t\t\tnextArrow: $container.find(c.fcArrows.next)\r\n\t\t});\r\n\r\n\t\t_.slick = _.$slickWrapper.ccsSlick(\"getSlick\");\r\n\t\t_.currentSlideIndex = _.slick.currentSlide;\r\n\t\t_.initBackGroundVideoAutoPlay(_.$slickWrapper);\r\n\r\n\t\t_.$slickWrapper.on(\"beforeChange\", function (e) {\r\n\t\t\t$(this).find(\".ccs-slick-slide\").css(\"visibility\", \"visible\");\r\n\t\t\t_.currentSlideIndex = _.slick.currentSlide;\r\n\r\n\t\t\tconst player = $(this).data(\"player-instance\");\r\n\t\t\tif (!player) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tplayer.pause();\r\n\t\t});\r\n\r\n\t\t_.$slickWrapper.on(\"afterChange\", function (e) {\r\n\t\t\t$(this).find(\".ccs-slick-slide:not('.ccs-slick-active')\").css(\"visibility\", \"hidden\");\r\n\t\t\tconst $self = $(this);\r\n\t\t\t_.initBackGroundVideoAutoPlay($self);\r\n\t\t});\r\n\r\n\t\t_.reportingListener();\r\n\t\t_.initPlayPauseBtn();\r\n\t\t_.fancyboxListener(_.$slickWrapper);\r\n\t\t_.hoverListener();\r\n\r\n\t\t_.$slickWrapper.on(\"ccsPlayer\", c.embeddedVideoSelector, function (e) {\r\n\t\t\tif (e.originalEvent.type === \"canplay\" || e.originalEvent.type === \"play\") {\r\n\r\n\t\t\t\t_.$slickWrapper.data(\"player-instance\", e.player);\r\n\r\n\t\t\t\tif (!isAutoplay) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_.$slickWrapper.ccsSlick(\"pause\");\r\n\t\t\t\t_.hoverListener(true);\r\n\t\t\t}\r\n\r\n\t\t\tif (e.originalEvent.type === \"pause\" || e.originalEvent.type === \"ended\") {\r\n\r\n\t\t\t\t_.$slickWrapper.data(\"player-instance\", null);\r\n\r\n\t\t\t\tif (!isAutoplay) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_.hoverListener();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfancyboxListener($container) {\r\n\t\tconst _ = this;\r\n\r\n\t\tif (!_.isAutoplayEnabled()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t$(document)\r\n\t\t\t.on(\"beforeShow.ccs-fb\", function (e) {\r\n\t\t\t\t$container.ccsSlick(\"pause\");\r\n\t\t\t\t_.hoverListener(true);\r\n\t\t\t})\r\n\t\t\t.on(\"afterClose.ccs-fb\", function (e) {\r\n\t\t\t\t$container.ccsSlick(\"play\");\r\n\t\t\t\t_.hoverListener();\r\n\t\t\t});\r\n\t}\r\n\r\n\thoverListener(turnOff) {\r\n\t\tconst _ = this;\r\n\t\tconst $container = _.$container;\r\n\t\tconst $slickWrapper = _.$slickWrapper;\r\n\r\n\t\tif (!_.isAutoplayEnabled()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (turnOff) {\r\n\t\t\t$container.off(\"mouseleave mouseenter focusin focusout\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t$container\r\n\t\t\t.on(\"mouseenter focusin\", function (e) {\r\n\t\t\t\t$slickWrapper.ccsSlick(\"pause\");\r\n\t\t\t})\r\n\t\t\t.on(\"mouseleave focusout\", function (e) {\r\n\t\t\t\tlet event = \"play\";\r\n\t\t\t\tconst $targerElement = $(e.relatedTarget);\r\n\t\t\t\tif ($targerElement.hasClass(\"ccs-zoom-tracker\") || $targerElement.hasClass(\"ccs-fancybox-container\"))\r\n\t\t\t\t\tevent = \"pause\";\r\n\r\n\t\t\t\t$slickWrapper.ccsSlick(event);\r\n\t\t\t});\r\n\t}\r\n\r\n\tisAutoplayEnabled() {\r\n\t\tconst _ = this;\r\n\t\tconst settings = _.settings;\r\n\t\treturn settings.speed && !utils.isMobile();\r\n\r\n\t}\r\n\r\n\treportingListener() {\r\n\t\tconst _ = this;\r\n\t\tconst $container = _.$container;\r\n\t\tconst $wrapper = _.$slickWrapper;\r\n\t\tconst $arrows = $container.find(c.fcArrows.selector);\r\n\r\n\t\t$arrows.on(\"click\", function (e) {\r\n\t\t\t_.submitNavigateEvent(\"arrows\");\r\n\t\t});\r\n\r\n\t\t$container.find(\".ccs-slick-dots li\").on(\"click\", function (e) {\r\n\t\t\t_.submitNavigateEvent(\"points\");\r\n\t\t});\r\n\r\n\t\t$wrapper[0].addEventListener(\"swipe\", function (e) {\r\n\t\t\t_.submitNavigateEvent(\"swipe\");\r\n\t\t}, true);\r\n\t}\r\n\r\n\tsubmitNavigateEvent(iteraction) {\r\n\t\tconst _ = this;\r\n\t\tconst slick = _.slick;\r\n\t\tconst curSlide = _.currentSlideIndex;\r\n\r\n\t\tconst newSlide = slick.currentSlide;\r\n\t\tconst eventParams = {\r\n\t\t\tsubelement: \"carousel\",\r\n\t\t\ttriggeredby: iteraction,\r\n\t\t\tnextSlide: newSlide + 1,\r\n\t\t\tpreviousSlide: curSlide + 1\r\n\t\t};\r\n\r\n\t\tconst direction = eventParams.nextSlide - eventParams.previousSlide;\r\n\t\tif (direction === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst actionContext = {\r\n\t\t\tsubelement: eventParams.subelement,\r\n\t\t\ttriggeredby: eventParams.triggeredby,\r\n\t\t\tscroll: direction > 0 ^ _.isRtl ? \"right\" : \"left\"\r\n\t\t};\r\n\r\n\t\tif (actionContext.subelement) {\r\n\t\t\tactionContext.target = eventParams.nextSlide;\r\n\t\t}\r\n\r\n\t\tutils.dispatchEvent(_.logCall, _.$container, \"navigate-content\", actionContext);\r\n\t}\r\n\r\n\tinitPlayPauseBtn() {\r\n\t\tconst _ = this;\r\n\t\tconst settings = _.settings;\r\n\t\tconst $container = _.$container;\r\n\r\n\t\tconst $customControls = $container.find(c.customControls);\r\n\t\tconst $btnPlayPause = $customControls.find(c.playPauseBtnSelector);\r\n\r\n\t\tif (!settings.playpause || !_.isAutoplayEnabled()) {\r\n\t\t\t$btnPlayPause.remove();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst $slickWrapper = $container.find(c.carouselSelector);\r\n\t\t$btnPlayPause.on(\"click\", function (e) {\r\n\t\t\tconst $self = $(this);\r\n\t\t\tif ($self.hasClass(\"ccs-play\")) {\r\n\t\t\t\t$self.removeClass(\"ccs-play\").addClass(\"ccs-pause\");\r\n\t\t\t\t$self.attr(\"aria-label\", \"click to pause\");\r\n\t\t\t\t$slickWrapper.ccsSlick(\"play\");\r\n\t\t\t\t_.submitClickEvent(\"play\");\r\n\t\t\t\t_.hoverListener();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t_.hoverListener(true);\r\n\t\t\t\t$self.removeClass(\"ccs-pause\").addClass(\"ccs-play\");\r\n\t\t\t\t$self.attr(\"aria-label\", \"click to play\");\r\n\t\t\t\t$slickWrapper.ccsSlick(\"pause\");\r\n\t\t\t\t_.submitClickEvent(\"pause\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t/*CCSDT-6841 - \"autoplay won't work in Safari and Chrome if any of parents of video tag have any DOM manipulation*/\r\n\t/*the explicit trigger required*/\r\n\tinitBackGroundVideoAutoPlay($bgContainer) {\r\n\t\tconst _ = this;\r\n\t\tif (utils.isMobile()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst $bgVideo = $bgContainer.find(c.bgFeatureSelector).find(\"video\");\r\n\t\tif ($bgVideo.length === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t$bgVideo.each(function () {\r\n\t\t\tif ($(this).closest(c.activeSlideSelector).length === 0) {\r\n\t\t\t\t$(this)[0].pause();\r\n\t\t\t} else {\r\n\t\t\t\t$(this)[0].play();\r\n\t\t\t}\r\n\r\n\t\t\t$(this).prop(\"muted\", true);\r\n\t\t});\r\n\t}\r\n\r\n\tsubmitClickEvent(iteraction) {\r\n\r\n\t\tconst actionContext = {\r\n\t\t\tsubelement: \"carousel\",\r\n\t\t\tclick: iteraction\r\n\t\t};\r\n\r\n\t\tutils.dispatchEvent(this.logCall, this.$container, \"navigate-content\", actionContext);\r\n\t}\r\n\r\n\tgetParams(eventName, next, prev) {\r\n\t\treturn {\r\n\t\t\tsubelement: eventName,\r\n\t\t\tnextSlide: next,\r\n\t\t\tpreviousSlide: prev\r\n\t\t};\r\n\t}\r\n\r\n\tgetSlick($container) {\r\n\t\treturn $container.ccsSlick(\"getSlick\");\r\n\t}\r\n}\r\n","Ôªøimport $ from \"jquery\";\r\nimport common from \"./common\";\r\n\r\nconst c = {\r\n\timageModeAttr: \"data-image-mode\",\r\n\theaderImageSelector: \".ccs-cc-inline-header-layout img\"\r\n};\r\n\r\n$.extend(c, common);\r\n\r\n// Initializes mobile images swap\r\nexport default function (ep, options) {\r\n\r\n\tconst trackedImages = ep.find(c.headerImageSelector + \",\" + c.imageSelector + \" img\").get();\r\n\tconst —Åheck = new RegExp(options.features.swapBreakpoint + \"px\");\r\n\r\n\tfunction handler() {\r\n\t\tconst breakpoints = ep.attr(\"max-width\");\r\n\t\tconst mobile = breakpoints && breakpoints.match(—Åheck);\r\n\t\tconst mode = mobile ? \"mobile\" : \"desktop\";\r\n\r\n\t\tswapImages(trackedImages, mode);\r\n\t}\r\n\r\n\thandler();\r\n\tshowHeader(ep);\r\n\r\n\tep.on(\"ccsBreakpointFired\", handler);\r\n}\r\n\r\n// Swaps desktop and mobile images\r\nfunction swapImages(images, mode) {\r\n\r\n\tfor (let i = images.length - 1; i >= 0; i--) {\r\n\t\tconst $img = $(images[i]);\r\n\t\tconst $a = $img.parent(c.imageSelector);\r\n\r\n\t\tif (!hasMobileMode($img)) {\r\n\t\t\timages.splice(i, 1);\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tif (!changeMode($img, mode)) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tlet actualSrc = pickAttribute($img, \"data-src\", \"src\");\r\n\t\tswapAttributes($img, actualSrc, \"data-alternative-src\");\r\n\r\n\t\tconst altValue = swapAttributes($img, \"data-large\", \"data-alternative-large\");\r\n\t\tif (altValue && $a.length) {\r\n\t\t\tactualSrc = pickAttribute($a, \"data-url\", \"href\");\r\n\t\t\t$a.attr(actualSrc, altValue);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Checks whether the mobile mode is applicable\r\nfunction hasMobileMode($baseNode) {\r\n\treturn $baseNode.length && $baseNode[0].hasAttribute(c.imageModeAttr);\r\n}\r\n\r\n// Changes the mode: mobile|desktop\r\nfunction changeMode($baseNode, mode) {\r\n\tif ($baseNode.attr(c.imageModeAttr) === mode) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\t$baseNode.attr(c.imageModeAttr, mode);\r\n\treturn true;\r\n}\r\n\r\n// Picks existing attribute\r\nfunction pickAttribute($element, attr, fallbackAttr) {\r\n\treturn $element[0].hasAttribute(attr)\r\n\t\t? attr\r\n\t\t: fallbackAttr;\r\n}\r\n\r\n// Swaps values of attributes\r\nfunction swapAttributes($element, attr, altAttr) {\r\n\tconst altAttrValue = $element.attr(altAttr);\r\n\tif (!altAttrValue) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t$element.attr(altAttr, $element.attr(attr));\r\n\t$element.attr(attr, altAttrValue);\r\n\treturn altAttrValue;\r\n}\r\n\r\n// Header image is hidden on mobile to avoid flickering\r\nfunction showHeader(ep) {\r\n\tconst $headerImage = ep.find(c.headerImageSelector);\r\n\r\n\t$headerImage.on(\"load\", e => $(e.target).css(\"visibility\", \"visible\"));\r\n\r\n\tif ($headerImage.length && $headerImage[0].complete) {\r\n\t\t$headerImage.trigger(\"load\");\r\n\t}\r\n}","Ôªøimport $ from \"jquery\";\r\nimport require from \"require\";\r\nimport lightbox from \"./lightbox\";\r\nimport common from \"./common\";\r\nimport Carousel from \"./featurecarousel\";\r\nimport mobileImages from \"./mobileimages\";\r\nimport * as utils from \"./utils\";\r\nimport * as video from \"./video\";\r\n\r\nconst c = {\r\n\tmobilePrintingVideo: \".ccs-cc-mobileprinting-video a\",\r\n\tcarouselWrapperSelector: \".ccs-cc-fc\",\r\n\tfeatureDescription: \".ccs-cc-inline-feature-description\"\r\n};\r\n\r\n$.extend(c, common);\r\n\r\nexport default function (ep, o) {\r\n\r\n\tconst $mediaElements = ep.find(c.imageSelector + \",\" + c.videoSelector + \",\" + c.mobilePrintingVideo);\r\n\tlightbox($mediaElements, o);\r\n\r\n\tinitCarousel(ep, o);\r\n\tinitFeaturesZoom(ep, o);\r\n\tinitEmbeddedVideo(ep, o);\r\n\tmobileImages(ep, o);\r\n\tinitFeaturesLazyLoad(ep, o);\r\n\tutils.restoreHref(ep.find(c.videoSelector));\r\n\tcheckInputLabels(ep.find(c.featureDescription));\r\n\r\n\tif (o.features.autoPlayVideoInViewPort) {\r\n\t\tvideo.autoPlayInViewport(ep, o.logCall, o.video.pluginPath, o.video.disableCC);\r\n\t}\r\n\r\n\tif (utils.isMobile()) {\r\n\t\tep.find(\".ccs-cc-inline-feature-background\").each((_, el) => {\r\n\t\t\tconst $bg = $(el);\r\n\t\t\tconst $video = $bg.find(\"video\");\r\n\r\n\t\t\tif ($video.length) {\r\n\t\t\t\tconst poster = $video.attr(\"poster\");\r\n\t\t\t\t$bg.css(\"background-image\", `url('${poster}')`);\r\n\t\t\t\t$video.remove();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction initFeaturesZoom(ep, o) {\r\n\tconst $featureImages = ep.find(c.imageSelector + \" img\");\r\n\tif (!$featureImages.length) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst inlineZoomSettings = getInlineZoomSettings(ep, o);\r\n\tif (inlineZoomSettings) {\r\n\t\trequire(\"zoomsl\");\r\n\t}\r\n\r\n\t$featureImages.one(\"load\", function () {\r\n\t\tconst $img = $(this);\r\n\r\n\t\tif ($img.attr(\"src\") === $img.attr(\"data-large\")\r\n\t\t\t&& (this.clientWidth * 1.2 > this.naturalWidth || this.naturalWidth < 200)) {\r\n\r\n\t\t\t$img.parent().before($img).remove();\r\n\t\t}\r\n\r\n\t\tif (inlineZoomSettings && $img.parent().is(\"a\")) {\r\n\t\t\t$img.imagezoomsl(inlineZoomSettings);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction getInlineZoomSettings(ep, o) {\r\n\tconst zoom = o.features.zoom;\r\n\r\n\tif (!zoom.enabled || utils.isMobile()) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tlet $container = $(\".ccs-zoom-container\");\r\n\tif (!$container.length) {\r\n\t\t$container = $(\"<div>\")\r\n\t\t\t.addClass(\"ccs-zoom-container\")\r\n\t\t\t.appendTo(document.body);\r\n\t}\r\n\r\n\t$container.addClass(o.containerClass);\r\n\r\n\tconst zoomSettings = {\r\n\t\tdisablewheel: false,\r\n\t\tmagnifycursor: \"pointer\",\r\n\t\tshowstatus: false,\r\n\t\toriginalsize: true,\r\n\t\tcontainer: $container,\r\n\t\tviewport: ep,\r\n\t\tclassmagnifier: \"ccs-zoom-magnifier\",\r\n\t\tclasscursorshade: \"ccs-zoom-cursorshade\",\r\n\t\tclassstatusdiv: \"ccs-zoom-statusdiv\",\r\n\t\tclasstextdn: \"ccs-zoom-textdn\",\r\n\t\tclasstracker: \"ccs-zoom-tracker\",\r\n\t\tonShow: e => {\r\n\t\t\tconst context = {\r\n\t\t\t\ttype: \"image\",\r\n\t\t\t\turl: e.setting.largeimage\r\n\t\t\t};\r\n\r\n\t\t\tutils.dispatchEvent(o.logCall, e.$img, \"hover\", context);\r\n\t\t}\r\n\t};\r\n\r\n\tif ($.isNumeric(zoom.width) && $.isNumeric(zoom.height)) {\r\n\t\tzoomSettings.magnifiersize = [zoom.width, zoom.height];\r\n\t}\r\n\r\n\treturn zoomSettings;\r\n}\r\n\r\nfunction initFeaturesLazyLoad(ep, o) {\r\n\tconst lazyLoadImages = ep.find(c.imageSelector);\r\n\tif (lazyLoadImages.length === 0) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst startImagesLoading = function () {\r\n\t\tfor (let i = lazyLoadImages.length - 1; i >= 0; i--) {\r\n\t\t\tconst $img = $(lazyLoadImages[i]).find(\"img\");\r\n\r\n\t\t\tif (o.features.disableLazyLoad || utils.isElementInViewport($img, 500)) {\r\n\t\t\t\tconst src = $img.data(\"src\");\r\n\r\n\t\t\t\t$img.attr(\"src\", src)\r\n\t\t\t\t\t.removeAttr(\"data-src\")\r\n\t\t\t\t\t.one(\"load\", e => utils.restoreHref($(e.target).closest(c.imageSelector)));\r\n\r\n\t\t\t\tif ($img[0].complete) {\r\n\t\t\t\t\t$img.trigger(\"load\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlazyLoadImages.splice(i, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (lazyLoadImages.length === 0) {\r\n\t\t\twindow.removeEventListener(\"scroll\", startImagesLoading, true);\r\n\t\t\twindow.removeEventListener(\"resize\", startImagesLoading, true);\r\n\t\t}\r\n\t}\r\n\r\n\tconst isVisible = function () {\r\n\t\tif (ep.is(\":visible\")) {\r\n\t\t\tstartImagesLoading();\r\n\t\t\twindow.addEventListener(\"scroll\", startImagesLoading, true);\r\n\t\t\twindow.addEventListener(\"resize\", startImagesLoading, true);\r\n\t\t} else {\r\n\t\t\tsetTimeout(isVisible, 300);\r\n\t\t}\r\n\t};\r\n\r\n\tsetTimeout(isVisible, 100); //wait the content loading for the correct calculation of the target area\r\n}\r\n\r\nfunction initEmbeddedVideo(ep, o) {\r\n\r\n\tep.find(c.embeddedVideoSelector).each(function () {\r\n\t\tconst $wrapper = $(this);\r\n\r\n\t\t/*hot-fix for featurecarousel. Do not init cloned videos that uses for infinite loop*/\r\n\t\tif ($wrapper.closest(\".ccs-slick-cloned\").length !== 0)\r\n\t\t\treturn;\r\n\r\n\t\tif (utils.isMobile() && $wrapper.is(\"[data-video-url$='.flv']\")) {\r\n\t\t\t$wrapper.html(function () {\r\n\t\t\t\treturn $(this).find(\"img\");\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t$wrapper\r\n\t\t\t.one(\"click.initInlineVideo\", function () {\r\n\t\t\t\tconst playerId = $wrapper.data(\"player\");\r\n\t\t\t\tif (!$(`#${playerId}`).length) {\r\n\t\t\t\t\t$wrapper.append(\r\n\t\t\t\t\t\t$(\"<div class='ccs-cc-inline-embedded-video-wrapper'>\").append(\r\n\t\t\t\t\t\t\t$(\"<video>\").attr(\"id\", $wrapper.data(\"player\"))));\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$wrapper\r\n\t\t\t\t\t.removeAttr(\"tabindex\")\r\n\t\t\t\t\t.off(\"keypress.initInlineVideo\");\r\n\r\n\t\t\t\tvideo.initInline($wrapper, o.logCall, o.video.pluginPath, o.video.disableCC);\r\n\t\t\t})\r\n\t\t\t.on(\"keypress.initInlineVideo\", e => e.keyCode === 13 && $wrapper.trigger(\"click.initInlineVideo\"));\r\n\r\n\t\tif (utils.isMobile()) {\r\n\t\t\tconst $img = $wrapper.find(\"img\");\r\n\r\n\t\t\t$img.one(\"load\", () => $wrapper.trigger(\"click.initInlineVideo\"));\r\n\r\n\t\t\tif ($img[0].complete) {\r\n\t\t\t\t$img.trigger(\"load\");\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction initCarousel(ep, o) {\r\n\tutils.updateOnVisible(ep, c.carouselWrapperSelector, el => new Carousel(el, o));\r\n}\r\n\r\nfunction checkInputLabels(featureDescription) {\r\n\t$(featureDescription).find(\"label\").each((_, el) => {\r\n\t\tconst $label = $(el);\r\n\r\n\t\tif ($label.attr(\"for\").length) {\r\n\t\t\tconst id = $label.attr(\"for\");\r\n\t\t\tif (!$(c.featureDescription).find(\"#\" + id).length && !$label.text().length) {\r\n\t\t\t\t$label.remove();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n","Ôªøimport $ from \"jquery\";\r\nimport { expand as expandAccordion } from \"./accordion\";\r\n\r\nconst c = {\r\n\tlinkClass: \"ccs-cc-inline-footnote-link\",\r\n\tfootnoteSupLinkSelector: \"sup a\",\r\n\theaderSelector: \".ccs-cc-inline-footer .ccs-cc-inline-acc-header\",\r\n\tfootnoteIdAttr: \"data-ccs-note-id\",\r\n\toffScreenTextClass: \"ccs-off-screen\"\r\n};\r\n\r\nexport default function (ep, options) {\r\n\r\n\tconst footnoteIdSelector = `[${c.footnoteIdAttr}]`;\r\n\r\n\tep.find(footnoteIdSelector).each(function () {\r\n\t\tconst $footnote = $(this);\r\n\r\n\t\tconst $footnoteAnchors = $footnote.find(\"a\");\r\n\r\n\t\t$footnoteAnchors.length > 0\r\n\t\t\t? updateLink(options, ep, $footnoteAnchors)\r\n\t\t\t: createNewLink(options,ep, $footnote);\r\n\t});\r\n\t\r\n\tep.on(\"click\",\r\n\t\tc.footnoteSupLinkSelector,\r\n\t\t() => expandAccordion(ep.find(c.headerSelector)));\r\n}\r\n\r\nfunction updateLink(o, ep, $footnoteAnchors) {\r\n\t$footnoteAnchors.each((i, item) => {\r\n\t\tconst $footNote = $(item);\r\n\t\tconst icId = o.inlineContentId;\r\n\r\n\t\tconst id = $footNote.attr(\"id\");\r\n\t\tconst refId = $footNote.attr(\"href\");\r\n\r\n\t\t$footNote.attr({\r\n\t\t\t\"id\": id + icId,\r\n\t\t\t\"href\": refId + icId\r\n\t\t});\r\n\r\n\t\tconst $link = ep.find(`a[id='${refId.substring(1)}']`);\r\n\r\n\t\t$link.attr({\r\n\t\t\t\"id\": $link.attr(\"id\") + icId,\r\n\t\t\t\"href\": $link.attr(\"href\") + icId\r\n\t\t});\r\n\r\n\t\t$footNote.prepend(\r\n\t\t\t$(\"<span/>\")\r\n\t\t\t\t.addClass(c.offScreenTextClass)\r\n\t\t\t\t.text(o.footer.anchorOffScreenText));\r\n\t});\r\n}\r\n\r\nfunction createNewLink(o, ep, $footnote) {\r\n\tconst noteId = $footnote.attr(c.footnoteIdAttr);\r\n\r\n\tlet $footerLink;\r\n\r\n\tep.find(\"sup\")\r\n\t\t.each(function () {\r\n\t\t\tconst $footnoteLinkCandidate = $(this);\r\n\t\t\tconst text = $.trim($footnoteLinkCandidate.text());\r\n\t\t\tif (text !== noteId || $footnoteLinkCandidate.attr(c.footnoteIdAttr)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst $contentLink = createContentLink(o, noteId);\r\n\r\n\t\t\tif (!$footerLink) {\r\n\t\t\t\t$footerLink = createFooterLink(o, noteId);\r\n\t\t\t}\r\n\r\n\t\t\t$footnoteLinkCandidate.html($contentLink).addClass(c.linkClass);\r\n\t\t});\r\n\r\n\tif (!$footerLink) {\r\n\t\t$footerLink = $(\"<a/>\").attr(\"href\", \"javascript:;\").prepend(noteId);\r\n\t}\r\n\r\n\t$footerLink.prepend($footnote.find(`.${c.offScreenTextClass}`));\r\n\r\n\t$footnote\r\n\t\t.html($footerLink)\r\n\t\t.removeAttr(\"tabindex\");\r\n}\r\n\r\nfunction createContentLink(o, noteId) {\r\n\treturn createCrossLink(o, noteId, false);\r\n};\r\n\r\nfunction createFooterLink(o, noteId) {\r\n\treturn createCrossLink(o, noteId, true);\r\n};\r\n\r\nfunction createCrossLink(o, noteId, isFooterLink) {\r\n\tconst prefix = `ccs-f${o.inlineContentId}`;\r\n\r\n\treturn $(\"<a/>\")\r\n\t\t.text(noteId)\r\n\t\t.attr({\r\n\t\t\t\"id\": prefix + (isFooterLink ? \"t\" : \"\") + noteId,\r\n\t\t\t\"href\": \"#\" + prefix + (isFooterLink ? \"\" : \"t\") + noteId\r\n\t\t});\r\n};\r\n","Ôªøimport $ from \"jquery\";\r\nimport common from \"../common\";\r\n\r\nconst c = {\r\n\tslickDefaults: { speed: 200, draggable: false, infinite: false },\r\n\trootGallerySelector: \".ccs-cc-ig\",\r\n\tthumbsContainer: \".ccs-slick-slider\",\r\n\tslideSelector: \".ccs-slick-slide\",\r\n\tviewportWrapperClass: \"ccs-cc-viewport-slide-wrapper\",\r\n\tviewportPreviewClass: \"ccs-cc-ig-viewport-preview\",\r\n\tcloudRoot: \".ccs-cc-ig-cloud\",\r\n\tcloudViewport: \".ccs-cc-ig-cloud-viewport\",\r\n\tcloudViewportArrow: \".ccs-ig-viewport-arrow\",\r\n\tcloudActiveClass: \"ccs-ig-cloud-active\"\r\n};\r\n\r\nexport default $.extend(c, common);\r\n","Ôªø// jQuery plugin\r\n// https://github.com/marcandre/detect_swipe\r\n\r\nimport $ from \"jquery\";\r\n\r\n$.detectSwipe = {\r\n\tversion: \"2.1.2\",\r\n\tenabled: \"ontouchstart\" in document.documentElement,\r\n\tpreventDefault: true,\r\n\tthreshold: 100\r\n};\r\n\r\nlet startX,\r\n\tstartY,\r\n\tisMoving = false;\r\n\r\nfunction onTouchEnd() {\r\n\tthis.removeEventListener(\"touchmove\", onTouchMove);\r\n\tthis.removeEventListener(\"touchend\", onTouchEnd);\r\n\tisMoving = false;\r\n}\r\n\r\nfunction onTouchMove(e) {\r\n\tif ($.detectSwipe.preventDefault) {\r\n\t\te.preventDefault();\r\n\t\te.stopImmediatePropagation();\r\n\t}\r\n\tif (isMoving) {\r\n\t\tconst x = e.touches[0].pageX;\r\n\t\tconst y = e.touches[0].pageY;\r\n\t\tconst dx = startX - x;\r\n\t\tconst dy = startY - y;\r\n\t\tlet dir;\r\n\t\tif (Math.abs(dx) >= $.detectSwipe.threshold) {\r\n\t\t\tdir = dx > 0 ? \"left\" : \"right\";\r\n\t\t}\r\n\t\telse if (Math.abs(dy) >= $.detectSwipe.threshold) {\r\n\t\t\tdir = dy > 0 ? \"up\" : \"down\";\r\n\t\t}\r\n\t\tif (dir) {\r\n\t\t\tonTouchEnd.call(this);\r\n\t\t\t$(this).trigger(\"swipe\", dir).trigger(\"swipe\" + dir);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction onTouchStart(e) {\r\n\tif (e.touches.length === 1) {\r\n\t\tstartX = e.touches[0].pageX;\r\n\t\tstartY = e.touches[0].pageY;\r\n\t\tisMoving = true;\r\n\t\tthis.addEventListener(\"touchmove\", onTouchMove, false);\r\n\t\tthis.addEventListener(\"touchend\", onTouchEnd, false);\r\n\t}\r\n}\r\n\r\nfunction setup() {\r\n\tthis.addEventListener && this.addEventListener(\"touchstart\", onTouchStart, false);\r\n}\r\n\r\nfunction teardown() {\r\n\tthis.removeEventListener(\"touchstart\", onTouchStart);\r\n}\r\n\r\n$.event.special.swipe = {\r\n\tsetup: setup,\r\n\tteardown: teardown\r\n};\r\n\r\n$.each([\"left\", \"up\", \"down\", \"right\"], function () {\r\n\t$.event.special[\"swipe\" + this] = {\r\n\t\tsetup: function () {\r\n\t\t\t$(this).on(\"swipe\", $.noop);\r\n\t\t}\r\n\t};\r\n});\r\n","Ôªøimport \"slick\";\r\n\r\nimport $ from \"jquery\";\r\nimport c from \"./consts\";\r\nimport lightbox from \"../lightbox\";\r\nimport * as utils from \"../utils\";\r\n\r\nexport default class BaseGallery {\r\n\r\n\tconstructor($gallery, options) {\r\n\t\tconst _ = this;\r\n\r\n\t\t_.$gallery = $gallery;\r\n\t\t_.$slick = $gallery.find(c.thumbsContainer);\r\n\r\n\t\t_.o = options;\r\n\t}\r\n\r\n\tinit() {\r\n\t\tconst _ = this,\r\n\t\t\t$slick = _.$slick,\r\n\t\t\t$gallery = _.$gallery;\r\n\r\n\t\tif (utils.isMobile()) {\r\n\t\t\t$slick\r\n\t\t\t\t.children().has(\"[data-video-url$='.flv']\")\r\n\t\t\t\t.remove();\r\n\t\t}\r\n\r\n\t\t_.updateAttributes();\r\n\r\n\t\t_.beforeInit();\r\n\t\t_.initSlick();\r\n\t\t_.afterInit();\r\n\r\n\t\t$gallery.trigger({ type: \"ccsGalleryLoad\", gallery: _ });\r\n\t}\r\n\r\n\tinitSlick() {\r\n\t\tconst _ = this,\r\n\t\t\t$gallery = _.$gallery,\r\n\t\t\t$slick = _.$slick;\r\n\r\n\t\tlet resizeTimer;\r\n\t\tconst resizeInvoker = function () {\r\n\t\t\tclearTimeout(resizeTimer);\r\n\r\n\t\t\tif ($gallery.is(\":visible\")) {\r\n\t\t\t\t_.resize();\r\n\t\t\t} else {\r\n\t\t\t\tresizeTimer = setTimeout(resizeInvoker, 500);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$slick\r\n\t\t\t.on(\"init\", function (e, slick) {\r\n\t\t\t\t_.slick = slick;\r\n\r\n\t\t\t\tlightbox(slick.$slides, _.o, { backFocus: false });\r\n\r\n\t\t\t\t$slick.closest(\".ccs-cc-inline\").on(\"ccsResize\", resizeInvoker);\r\n\t\t\t\tutils.bindResizeEvent(resizeInvoker);\r\n\t\t\t\tresizeInvoker();\r\n\t\t\t})\r\n\t\t\t.on(\"beforeChange\", function (e, slick, previousSlide, nextSlide) {\r\n\t\t\t\t_.submitNavigateEvent(previousSlide, nextSlide);\r\n\t\t\t});\r\n\r\n\t\t$(document).on(\"afterClose.ccs-fb\", function (e, fancybox, fbSlide) {\r\n\t\t\tconst $slide = fbSlide.opts.$orig;\r\n\r\n\t\t\tif (!$slick.has($slide).length) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t$slide.trigger({ type: \"fbClose\", originalEvent: e });\r\n\t\t});\r\n\r\n\t\tconst slickConfig = $.extend({}, c.slickDefaults, { rtl: _.o.isRtl });\r\n\t\t$slick.ccsSlick(slickConfig);\r\n\t}\r\n\r\n\tupdateAttributes() {\r\n\t\tconst _ = this,\r\n\t\t\t$slides = _.$slick.children();\r\n\r\n\t\tconst elementId = _.$gallery.closest(c.sectionSelector).attr(\"id\");\r\n\r\n\t\t$slides.each(function (index, el) {\r\n\t\t\tconst $slide = $(el).attr(\"data-ccs-fancybox\", elementId);\r\n\r\n\t\t\t$slide.attr(\"data-src\", $slide.data(\"video-url\") || $slide.data(\"image-url\"));\r\n\r\n\t\t\tconst $img = $slide.find(\"img\");\r\n\r\n\t\t\tlet alt = $img.attr(\"alt\");\r\n\t\t\tif (!alt) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\talt = utils.stringFormat(alt, index + 1, $slides.length);\r\n\r\n\t\t\t$img.attr(\"alt\", alt.toLowerCase());\r\n\t\t});\r\n\t}\r\n\r\n\tsubmitNavigateEvent(previousSlide, nextSlide, subelement) {\r\n\t\tconst direction = nextSlide - previousSlide;\r\n\t\tif (direction === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst actionContext = {\r\n\t\t\tscroll: direction > 0 ^ this.o.isRtl ? \"right\" : \"left\",\r\n\t\t\tsubelement: subelement\r\n\t\t};\r\n\r\n\t\tutils.dispatchEvent(this.o.logCall, this.$gallery, \"navigate-content\", actionContext);\r\n\t}\r\n\r\n\tchangeSlidesCount() {\r\n\t\tconst _ = this;\r\n\t\tconst slick = this.slick;\r\n\r\n\t\tconst slickSize = slick.$list.width();\r\n\r\n\t\tconst $slide = slick.$slides.find(\".ccs-cc-thumbnail-wrapper:visible\");\r\n\t\tconst slideSize = $slide.outerWidth(true);\r\n\r\n\t\tconst slidesCount = _.calcCount(slickSize, slideSize);\r\n\r\n\t\tif (slick.options.slidesToShow !== slidesCount || slick.listWidth === 0) {\r\n\t\t\t_.slickSetSlidesCount(slidesCount);\r\n\t\t}\r\n\t}\r\n\r\n\tcalcCount(wrapSize, slideSize) {\r\n\t\treturn Math.max(Math.floor(wrapSize / slideSize), 1);\r\n\t}\r\n\r\n\tslickSetSlidesCount(count) {\r\n\t\tconst slick = this.slick;\r\n\r\n\t\tslick.slickSetOption(\"slidesToShow\", count);\r\n\t\tslick.slickSetOption(\"slidesToScroll\", count);\r\n\r\n\t\tslick.refresh();\r\n\t}\r\n\r\n\tresize() { }\r\n\tbeforeInit() { }\r\n\tafterInit() { }\r\n\tswitchSlide(slide) { }\r\n}\r\n","Ôªøimport $ from \"jquery\";\r\nimport BaseGallery from \"./base\";\r\n\r\nexport default class RibbonGallery extends BaseGallery {\r\n\r\n\tafterInit() {\r\n\t\tconst _ = this;\r\n\r\n\t\tif (_.o.isRtl) {\r\n\t\t\t_.slick.loadImages();\r\n\t\t}\r\n\r\n\t\t_.$slick.on(\"fbClose\", e => _.switchSlide(e.target));\r\n\t}\r\n\r\n\tresize() {\r\n\t\tthis.changeSlidesCount();\r\n\t}\r\n\r\n\tswitchSlide(slide) {\r\n\r\n\t\tconst slick = this.slick,\r\n\t\t\t$slick = this.$slick,\r\n\t\t\t$slide = $(slide);\r\n\r\n\t\t$slick.one(\"afterChange\", () => {\r\n\t\t\t$slide.children().focus();\r\n\t\t\tslick.loadImages();\r\n\t\t});\r\n\r\n\t\tslick.goTo($slide.data(\"slick-index\"));\r\n\t}\r\n}","Ôªøimport $ from \"jquery\";\r\nimport c from \"./consts\";\r\nimport lightbox from \"../lightbox\";\r\nimport BaseGallery from \"./base\";\r\nimport * as video from \"../video\";\r\nimport * as utils from \"../utils\";\r\nimport \"../swipe\";\r\n\r\nexport default class CloudGallery extends BaseGallery {\r\n\r\n\tbeforeInit() {\r\n\t\tthis.$slick\r\n\t\t\t.find(c.slideSelector)\r\n\t\t\t.each(function () {\r\n\t\t\t\tconst $link = $(this).find(\"a.ccs-cc-thumbnail-wrapper\");\r\n\r\n\t\t\t\t$(\"<span class='ccs-cc-thumbnail-wrapper'>\")\r\n\t\t\t\t\t.html($link.html())\r\n\t\t\t\t\t.insertAfter($link);\r\n\t\t\t});\r\n\t}\r\n\r\n\tafterInit() {\r\n\t\tconst _ = this,\r\n\t\t\t$slick = _.$slick,\r\n\t\t\t$slides = _.slick.$slides;\r\n\r\n\t\tutils.isMobile()\r\n\t\t\t? _.initMobileBehavior()\r\n\t\t\t: _.initDesktopBehavior();\r\n\r\n\t\t$slick.on(\"fbClose\", e => _.switchSlide(e.target, true, true));\r\n\r\n\t\t_.switchSlide($slides[0], true);\r\n\r\n\t\tif ($slides.length === 1) {\r\n\t\t\t_.initSingleSlideBehavior();\r\n\t\t}\r\n\t}\r\n\r\n\tinitSingleSlideBehavior() {\r\n\t\tconst _ = this,\r\n\t\t\t$slick = _.$slick,\r\n\t\t\t$gallery = _.$gallery;\r\n\r\n\t\tconst $viewportSlideWrapper = $gallery.find(`.${c.viewportWrapperClass}`);\r\n\t\tconst $viewportSlidePreview = $gallery.find(`.${c.viewportPreviewClass}`);\r\n\r\n\t\tif ($viewportSlideWrapper.data(\"media-type\") === \"image\") {\r\n\t\t\t$viewportSlidePreview.removeAttr(\"tabindex\");\r\n\r\n\t\t\t$viewportSlideWrapper\r\n\t\t\t\t.attr(\"href\", $viewportSlidePreview.attr(\"src\"))\r\n\t\t\t\t.removeAttr(\"tabindex\");\r\n\r\n\t\t\tlightbox($viewportSlideWrapper, _.o, { backFocus: true });\r\n\t\t}\r\n\r\n\t\t$slick.ccsSlick(\"unslick\").remove();\r\n\t}\r\n\r\n\tinitMobileBehavior() {\r\n\t\tconst _ = this,\r\n\t\t\t$slick = _.$slick,\r\n\t\t\t$slides = _.slick.$slides,\r\n\t\t\t$gallery = _.$gallery;\r\n\r\n\t\t$slides.find(\".ccs-cc-thumbnail-wrapper\").on(\"click\", function (e) {\r\n\t\t\t_.switchSlide(e.target);\r\n\r\n\t\t\tif (e.originalEvent) {\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$gallery.find(c.cloudViewportArrow).remove();\r\n\r\n\t\t$gallery.find(\".ccs-cc-ig-cloud-viewport\")\r\n\t\t\t.on(\"swipeleft swiperight\", function (e) {\r\n\t\t\t\tconst $curSlide = $slick.find(`.${c.cloudActiveClass}`);\r\n\t\t\t\tconst $newSlide = e.type === \"swiperight\" ? $curSlide.prev() : $curSlide.next();\r\n\r\n\t\t\t\tif ($newSlide.length) {\r\n\t\t\t\t\t_.submitNavigateViewportEvent($newSlide, $curSlide);\r\n\t\t\t\t\t_.switchSlide($newSlide);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tinitDesktopBehavior() {\r\n\t\tconst _ = this,\r\n\t\t\t$slides = _.slick.$slides;\r\n\r\n\t\tlet navOnHoverTimer;\r\n\t\t$slides\r\n\t\t\t.on(\"mouseover\", function (e) {\r\n\t\t\t\tnavOnHoverTimer = setTimeout(function () {\r\n\t\t\t\t\t_.switchSlide(e.target);\r\n\t\t\t\t}, 100);\r\n\t\t\t})\r\n\t\t\t.on(\"mouseout\", function () {\r\n\t\t\t\tclearTimeout(navOnHoverTimer);\r\n\t\t\t});\r\n\r\n\t\t_.$gallery.find(c.cloudViewportArrow).on(\"click\", function (e) {\r\n\t\t\tconst $arrow = $(e.target).closest(c.cloudViewportArrow);\r\n\r\n\t\t\tconst $curSlide = $slides.filter(`.${c.cloudActiveClass}`);\r\n\t\t\tconst $newSlide = $arrow.is(\".ccs-slick-prev\") ? $curSlide.prev() : $curSlide.next();\r\n\r\n\t\t\t_.submitNavigateViewportEvent($newSlide, $curSlide);\r\n\t\t\t_.switchSlide($newSlide);\r\n\t\t});\r\n\t}\r\n\r\n\tresize() {\r\n\t\tthis.changeHeight();\r\n\t\tthis.changeSlidesCount();\r\n\t}\r\n\r\n\tswitchSlide(slide, suppressLog, backFocus) {\r\n\t\tconst _ = this;\r\n\t\tconst $slick = _.$slick;\r\n\t\tconst slick = _.slick;\r\n\r\n\t\tconst $slide = $(slide).closest(c.slideSelector);\r\n\t\tconst isHidden = _.slideIsHidden($slide);\r\n\r\n\t\tif (backFocus) {\r\n\t\t\tisHidden\r\n\t\t\t\t? $slick.one(\"afterChange\", () => $slide.focus())\r\n\t\t\t\t: $slide.focus();\r\n\t\t}\r\n\r\n\t\tif (isHidden) {\r\n\t\t\tslick.goTo($slide.data(\"slick-index\"));\r\n\t\t}\r\n\r\n\t\tconst $prevActive = $slick.find(`.${c.cloudActiveClass}`);\r\n\r\n\t\tif ($slide.is($prevActive)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!suppressLog) {\r\n\t\t\t_.submitHoverEvent($slide);\r\n\t\t}\r\n\r\n\t\t$prevActive\r\n\t\t\t.removeClass(c.cloudActiveClass)\r\n\t\t\t.find(\"a\").removeAttr(\"disabled\");\r\n\r\n\t\t$slide\r\n\t\t\t.addClass(c.cloudActiveClass)\r\n\t\t\t.find(\"a\").attr(\"disabled\", \"\");\r\n\r\n\t\tconst $viewport = $slick.siblings(c.cloudViewport);\r\n\r\n\t\t$viewport\r\n\t\t\t.toggleClass(\"first-slide\", $slide.is(\":first-child\"))\r\n\t\t\t.toggleClass(\"last-slide\", $slide.is(\":last-child\"));\r\n\r\n\t\tif (_.o.isRtl || isHidden) {\r\n\t\t\tslick.loadImages();\r\n\t\t}\r\n\r\n\t\tconst $prev = $viewport\r\n\t\t\t.children(`.${c.cloudActiveClass}`)\r\n\t\t\t.removeClass(c.cloudActiveClass);\r\n\r\n\t\tvideo.stop($prev.children());\r\n\r\n\t\tconst $viewportSlide = $viewport.find(`[data-slide-index=${$slide.index()}]`);\r\n\r\n\t\tif ($viewportSlide.length !== 0) {\r\n\t\t\t$viewportSlide.addClass(c.cloudActiveClass);\r\n\t\t} else {\r\n\t\t\t$viewport.prepend(_.createViewportSlide($slide));\r\n\t\t}\r\n\t}\r\n\r\n\tsubmitHoverEvent($slide) {\r\n\t\tconst context = {\r\n\t\t\ttype: $slide.data(\"media-type\"),\r\n\t\t\turl: $slide.data(\"video-url\") || $slide.data(\"image-url\")\r\n\t\t};\r\n\r\n\t\tutils.dispatchEvent(this.o.logCall, $slide, \"hover\", context);\r\n\t}\r\n\r\n\tslideIsHidden($slide) {\r\n\t\tconst $slick = this.$slick;\r\n\r\n\t\treturn $slick.offset().left > $slide.offset().left\r\n\t\t\t|| $slick.offset().left + $slick.width() < $slide.offset().left + $slide.width();\r\n\t}\r\n\r\n\tcreateViewportSlide($slickSlide) {\r\n\t\tconst _ = this;\r\n\r\n\t\tconst imgUrl = $slickSlide.data(\"image-url\");\r\n\t\tconst altText = $slickSlide.find(\"img\").attr(\"alt\").replace(_.o.media.zoomIn, _.o.media.showLargeImg);\r\n\r\n\t\tconst $viewportSlide = $(\"<div>\")\r\n\t\t\t.addClass(\"ccs-cc-ig-viewport-slide loading\")\r\n\t\t\t.attr(\"data-slide-index\", $slickSlide.index());\r\n\r\n\t\tconst $viewportWrapper = $(`<a class='${c.viewportWrapperClass}' tabindex='-1' href='javascript:;' >`);\r\n\r\n\t\tconst $viewportImage = $(`<img class='${c.viewportPreviewClass}'>`)\r\n\t\t\t.attr(\"tabindex\", 0)\r\n\t\t\t.attr(\"src\", imgUrl)\r\n\t\t\t.attr(\"alt\", altText)\r\n\t\t\t.on(\"load\", function () {\r\n\t\t\t\t$viewportSlide.removeClass(\"loading\");\r\n\t\t\t});\r\n\r\n\t\tconst createConcreteSlide = $slickSlide.data(\"media-type\") === \"image\"\r\n\t\t\t? _.createImageViewportSlide\r\n\t\t\t: _.createVideoViewportSlide;\r\n\r\n\t\tcreateConcreteSlide.call(_, $slickSlide, $viewportWrapper, $viewportImage);\r\n\r\n\t\tsetTimeout(function () {\r\n\t\t\t$viewportSlide.addClass(c.cloudActiveClass);\t// for animation\r\n\t\t}, 10);\r\n\r\n\t\treturn $viewportSlide.append($viewportWrapper);\r\n\t}\r\n\r\n\tcreateImageViewportSlide($slickSlide, $viewportWrapper, $viewportImage) {\r\n\r\n\t\t$viewportWrapper\r\n\t\t\t.attr(c.mediaTypeAttr, \"image\")\r\n\t\t\t.on(\"click\", function () {\r\n\t\t\t\t$slickSlide.trigger(\"click\");\r\n\t\t\t})\r\n\t\t\t.on(\"keypress\", function (e) {\r\n\t\t\t\tif (e.keyCode === 13) {\r\n\t\t\t\t\t$slickSlide.trigger(\"click\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.append($viewportImage);\r\n\t}\r\n\r\n\tcreateVideoViewportSlide($slickSlide, $viewportWrapper, $viewportImage) {\r\n\t\tconst _ = this;\r\n\r\n\t\tconst playerId = $slickSlide.closest(c.sectionSelector).attr(\"id\") + \"_player-\" + $slickSlide.index();\r\n\r\n\t\tconst $player = $(\"<div>\")\r\n\t\t\t.attr(\"id\", playerId)\r\n\t\t\t.append($viewportImage)\r\n\t\t\t.appendTo($viewportWrapper);\r\n\r\n\t\t$viewportImage.on(\"load\", function () {\r\n\t\t\t$player.append($(\"<span class='ccs-cc-inline-video-play-icon'>\"));\r\n\t\t});\r\n\r\n\t\t_.copyDataAttributes($slickSlide, $viewportWrapper);\r\n\r\n\t\tconst initPlayer = function (autoplay) {\r\n\t\t\tvideo.initInline(\r\n\t\t\t\t$viewportWrapper,\r\n\t\t\t\t_.o.logCall,\r\n\t\t\t\t_.o.video.pluginPath,\r\n\t\t\t\t_.o.video.disableCC,\r\n\t\t\t\tfalse,\r\n\t\t\t\tautoplay);\r\n\t\t};\r\n\r\n\t\t$viewportWrapper.attr(\"data-player\", playerId);\r\n\r\n\t\tif (utils.isMobile()) {\r\n\t\t\tsetTimeout(() => initPlayer(false));\r\n\t\t} else {\r\n\t\t\t$viewportWrapper\r\n\t\t\t\t.on(\"keydown\", function (e) {\r\n\t\t\t\t\tif (e.keyCode === 13) {\r\n\t\t\t\t\t\tinitPlayer(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.one(\"click\", () => initPlayer(true));\r\n\t\t}\r\n\t}\r\n\r\n\tsubmitNavigateViewportEvent($newSlide, $curSlide) {\r\n\t\tthis.submitNavigateEvent($curSlide.index(), $newSlide.index(), \"cloud\");\r\n\t}\r\n\r\n\tcopyDataAttributes($source, $target) {\r\n\t\tconst attr = $.grep($source[0].attributes, at => /^data-((?!fancybox).)*$/.test(at.name));\r\n\t\tfor (let i = 0; i < attr.length; i++) {\r\n\t\t\t$target.attr(attr[i].name, attr[i].value).data(attr[i].name, attr[i].value);\r\n\t\t}\r\n\t}\r\n\r\n\tchangeHeight() {\r\n\t\tconst _ = this,\r\n\t\t\t$viewport = _.$gallery.find(c.cloudViewport);\r\n\r\n\t\tconst width = $viewport.width();\r\n\t\tconst curHeight = $viewport.height();\r\n\r\n\t\tlet maxHeight = _.maxHeight;\r\n\t\tif (!maxHeight) {\r\n\t\t\tmaxHeight = _.maxHeight = curHeight;\r\n\t\t}\r\n\r\n\t\tconst ratio = 16 / 9;\r\n\r\n\t\tif (width < maxHeight * ratio) {\r\n\t\t\tconst newHeight = width / ratio;\r\n\t\t\tif (newHeight <= maxHeight) {\r\n\t\t\t\t$viewport.height(newHeight);\r\n\t\t\t}\r\n\t\t} else if (curHeight !== maxHeight) {\r\n\t\t\t$viewport.height(maxHeight);\r\n\t\t}\r\n\t}\r\n}","Ôªøimport Ribbon from \"./ribbon\";\r\nimport Cloud from \"./cloud\";\r\n\r\nexport default class GalleryFactory {\r\n\r\n\tcreate($gallery, o) {\r\n\r\n\t\tlet Gallery = Ribbon;\r\n\r\n\t\tif ($gallery.hasClass(\"ccs-cc-ig-cloud\")) {\r\n\t\t\tGallery = Cloud;\r\n\t\t}\r\n\r\n\t\treturn new Gallery($gallery, o);\r\n\t}\r\n}\r\n","Ôªøimport $ from \"jquery\";\r\nimport require from \"require\";\r\nimport * as utils from \"./utils\";\r\nimport { init as initVideo } from \"./video\";\r\n\r\nconst c = {\r\n\trootClass: \"ccs-hotspots\",\r\n\tmobileClass: \"ccs-hotspots-mobile\",\r\n\tnoScrollClass: \"ccs-noscroll\",\r\n\tpointClass: \"ccs-hotspots-point\",\r\n\tpointActiveClass: \"ccs-hotspots-point-active\",\r\n\tpointSize: 32,\r\n\ttooltipTheme: \"qtip-light qtip-shadow\",\r\n\ttooltipsContainerClass: \"ccs-hotspots-tooltips\",\r\n\ttooltipClass: \"ccs-hotspots-tooltip\",\r\n\tvideoPlayerClass: \"ccs-hotspots-video\",\r\n\r\n\tproductTooltipClass: \"ccs-hotspots-tooltip-product\",\r\n\tproductPriceClass: \"ccs-hotspots-product-price\",\r\n\tproductCartClass: \"ccs-hotspots-product-cart\",\r\n\tcustomCartClass: \"ccs-custom-cart\",\r\n\tloadingClass: \"ccs-loading\"\r\n};\r\n\r\nconst defaultOptions = {\r\n\tevent: \"click\",\r\n\tsize: \"small\",\r\n\ticonSet: \"ccs-hotspots-default\",\r\n\tvideo: {\r\n\t\tautoplay: true\r\n\t}\r\n};\r\n\r\nexport default function (ep, options) {\r\n\tconst $images = ep.find(\".ccs-hotspots-image\");\r\n\r\n\tif (!$images.length || !options.hotspots) {\r\n\t\treturn;\r\n\t}\r\n\r\n\trequire(\"qtip\");\r\n\r\n\t$.fn.qtip.zindex = $.fn.qtip.modal_zindex = 100000; // fancybox\r\n\r\n\tconst $body = $(\"body\");\r\n\tlet $container = $body.find(`.${c.tooltipsContainerClass}`);\r\n\tif ($container.length === 0) {\r\n\t\t$container = $(\"<div>\")\r\n\t\t\t.addClass(c.tooltipsContainerClass)\r\n\t\t\t.addClass(options.containerClass)\r\n\t\t\t.appendTo($body);\r\n\t}\r\n\r\n\tconst o = buildOptions(options, $container);\r\n\r\n\t$images.each((i, img) => initMainImage(img, o));\r\n}\r\n\r\nfunction buildOptions(options, $container) {\r\n\tconst o = $.extend(true, {}, defaultOptions, options.hotspots);\r\n\r\n\to.video = options.video;\r\n\to.logCall = options.logCall;\r\n\to.$container = $container;\r\n\r\n\to.isMobile = utils.isMobile() && !options.lightbox.disabled;\r\n\r\n\tif (o.isMobile) {\r\n\t\to.event = \"click\";\r\n\t}\r\n\r\n\treturn o;\r\n}\r\n\r\nfunction initMainImage(img, o) {\r\n\tconst $image = $(img);\r\n\r\n\tconst hotspots = $image.data(\"hotspots\");\r\n\tif (hotspots.length === 0) {\r\n\t\tconsole.warn(\"No hotspots data was found\");\r\n\t\treturn;\r\n\t}\r\n\r\n\t$image\r\n\t\t.removeAttr(\"data-hotspots\")\r\n\t\t.wrap($(\"<div>\")\r\n\t\t\t.addClass(c.rootClass)\r\n\t\t\t.addClass(o.iconSet));\r\n\r\n\tif (o.isMobile) {\r\n\t\tinitMobile($image, o.$container, hotspots);\r\n\t}\r\n\r\n\t$image.one(\"load\", () => {\r\n\t\thotspots.forEach(hotspot => initHotspot($image, hotspot, o));\r\n\t\t$image.trigger(\"hotspotReady\");\r\n\t});\r\n\r\n\tif ($image[0].complete) {\r\n\t\t$image.trigger(\"load\");\r\n\t}\r\n}\r\n\r\nfunction initMobile($img, $container, hotspots) {\r\n\t$container.addClass(c.mobileClass);\r\n\t$img.parent().addClass(c.mobileClass);\r\n\r\n\tfor (let i = 0; i < hotspots.length; i++) {\r\n\t\tconst hotspot = hotspots[i];\r\n\r\n\t\tif (hotspot.type === \"video\" && hotspot.mediaUrl.match(/\\.flv$/)) {\r\n\t\t\thotspot.type = \"image\";\r\n\t\t\thotspot.mediaUrl = hotspot.previewUrl;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction initHotspot($img, hotspot, options) {\r\n\tconst o = options;\r\n\r\n\tconst position = getPosition(hotspot.position, o.isMobile);\r\n\tconst isProduct = !!hotspot.product;\r\n\r\n\tconst closeButtonBlockTime = o.event === \"click\" ? 0 : 500;\r\n\r\n\tconst $closeButton = o.isMobile\r\n\t\t? $(\"<a class='qtip-close qtip-icon' title='Close' aria-label='Close' role='button'>\" +\r\n\t\t\t\"<svg viewBox='0 0 40 40'>\" +\r\n\t\t\t\"<path d='M10,10 L30,30 M30,10 L10,30'/>\" +\r\n\t\t\t\"</svg>\" +\r\n\t\t\t\"</a>\")\r\n\t\t: \"Close\";\r\n\r\n\tlet timer, openTime;\r\n\r\n\t$(\"<div>\")\r\n\t\t.addClass(c.pointClass)\r\n\t\t.addClass(c.pointClass + \"-\" + hotspot.type)\r\n\t\t.toggleClass(c.productTooltipClass, isProduct)\r\n\t\t.attr(\"tabindex\", 0)\r\n\t\t.css(\"top\", `calc(${hotspot.y * 100}% - ${c.pointSize / 2}px)`)\r\n\t\t.css(\"left\", `calc(${hotspot.x * 100}% - ${c.pointSize / 2}px)`)\r\n\t\t.insertBefore($img)\r\n\t\t.qtip({\r\n\t\t\tprerender: true,\r\n\t\t\tcontent: {\r\n\t\t\t\ttext: buildContent(hotspot, o),\r\n\t\t\t\tbutton: o.event === \"click\" ? $closeButton : false\r\n\t\t\t},\r\n\t\t\tshow: {\r\n\t\t\t\tevent: o.event === \"click\" ? \"click\" : \"mouseenter\",\r\n\t\t\t\tmodal: o.isMobile\r\n\t\t\t},\r\n\t\t\thide: {\r\n\t\t\t\tfixed: true,\r\n\t\t\t\tdelay: o.event === \"click\" ? 0 : 300,\r\n\t\t\t\tevent: o.isMobile\r\n\t\t\t\t\t? false\r\n\t\t\t\t\t: o.event === \"click\" ? \"unfocus\" : \"mouseleave\"\r\n\t\t\t},\r\n\t\t\tstyle: {\r\n\t\t\t\tclasses: c.tooltipTheme + \" \" + c.tooltipClass\r\n\t\t\t},\r\n\t\t\tposition: {\r\n\t\t\t\tmy: position.my,\r\n\t\t\t\tat: position.at,\r\n\t\t\t\teffect: false,\r\n\t\t\t\tcontainer: o.$container,\r\n\t\t\t\tviewport: $(window),\r\n\t\t\t\tadjust: {\r\n\t\t\t\t\tmethod: position.method\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tevents: {\r\n\t\t\t\trender(event, api) {\r\n\t\t\t\t\tapi.tooltip\r\n\t\t\t\t\t\t.addClass(c.tooltipClass + \"-\" + hotspot.type)\r\n\t\t\t\t\t\t.addClass(c.tooltipClass + \"-\" + (hotspot.size || o.size))\r\n\t\t\t\t\t\t.toggleClass(c.productTooltipClass, isProduct)\r\n\t\t\t\t\t\t.attr(\"tabindex\", 0)\r\n\t\t\t\t\t\t.on(\"keydown\", e => {\r\n\t\t\t\t\t\t\tif (e.keyCode === 27) {\r\n\t\t\t\t\t\t\t\tapi.hide();\r\n\t\t\t\t\t\t\t\tapi.elements.target.focus();\r\n\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\tapi.hotspot = hotspot;\r\n\r\n\t\t\t\t\tif (o.isMobile) {\r\n\t\t\t\t\t\trenderMobile(api);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\trenderVideo(api, o);\r\n\t\t\t\t\trenderProduct(api, o);\r\n\t\t\t\t},\r\n\t\t\t\tshow(event, api) {\r\n\t\t\t\t\tif (api.tooltip.is(\":visible\")) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst point = api.elements.target;\r\n\r\n\t\t\t\t\tpoint.addClass(c.pointActiveClass).blur();\r\n\r\n\t\t\t\t\tif (o.isMobile) {\r\n\t\t\t\t\t\tshowMobile(api);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttimer = setTimeout(() => {\r\n\t\t\t\t\t\tpoint.off(\"click.show\")\r\n\t\t\t\t\t\t\t.one(\"click.show\", () => api.hide());\r\n\t\t\t\t\t}, closeButtonBlockTime);\r\n\r\n\t\t\t\t\topenTime = new Date();\r\n\r\n\t\t\t\t\tdispatchPopupEvent(o.logCall, $img, api.hotspot, \"popup-open\");\r\n\t\t\t\t},\r\n\t\t\t\tvisible(event, api) {\r\n\t\t\t\t\tapi.tooltip.focus();\r\n\t\t\t\t},\r\n\t\t\t\thide(event, api) {\r\n\t\t\t\t\tapi.elements.target\r\n\t\t\t\t\t\t.removeClass(c.pointActiveClass)\r\n\t\t\t\t\t\t.off(\"click.show\")\r\n\t\t\t\t\t\t.one(\"click.show\", () => api.show());\r\n\r\n\t\t\t\t\tif (o.isMobile) {\r\n\t\t\t\t\t\thideMobile();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tclearTimeout(timer);\r\n\r\n\t\t\t\t\tconst qty = Math.round((new Date() - openTime) / 1000);\r\n\t\t\t\t\tdispatchPopupEvent(o.logCall, $img, api.hotspot, \"popup-close\", qty);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\t.keyup(function (event) {\r\n\t\t\tif (event.keyCode === 13) {\r\n\t\t\t\t$(this).qtip(\"show\");\r\n\r\n\t\t\t}\r\n\t\t\tif (event.keyCode === 27) {\r\n\t\t\t\t$(this).qtip(\"hide\");\r\n\t\t\t}\r\n\t\t});\r\n}\r\n\r\nfunction getPosition(position, isMobile) {\r\n\r\n\tif (isMobile) {\r\n\t\treturn {\r\n\t\t\tmy: \"center\",\r\n\t\t\tat: \"center\",\r\n\t\t\tmethod: \"none\"\r\n\t\t};\r\n\t}\r\n\r\n\tswitch (position) {\r\n\r\n\t\tcase \"left\":\r\n\t\t\treturn {\r\n\t\t\t\tmy: \"center right\",\r\n\t\t\t\tat: \"center left\",\r\n\t\t\t\tmethod: \"flip shift\"\r\n\t\t\t};\r\n\r\n\t\tcase \"right\":\r\n\t\t\treturn {\r\n\t\t\t\tmy: \"center left\",\r\n\t\t\t\tat: \"center right\",\r\n\t\t\t\tmethod: \"flip shift\"\r\n\t\t\t};\r\n\r\n\t\tcase \"bottom\":\r\n\t\t\treturn {\r\n\t\t\t\tmy: \"top center\",\r\n\t\t\t\tat: \"bottom center\",\r\n\t\t\t\tmethod: \"shift flip\"\r\n\t\t\t};\r\n\r\n\t\tdefault:\r\n\t\t\treturn {\r\n\t\t\t\tmy: \"bottom center\",\r\n\t\t\t\tat: \"top center\",\r\n\t\t\t\tmethod: \"shift flip\"\r\n\t\t\t};\r\n\t}\r\n}\r\n\r\nfunction dispatchPopupEvent(logCall, $img, hotspot, type, qty) {\r\n\r\n\tconst actionContext = {\r\n\t\ttype: type,\r\n\t\thotspot: {\r\n\t\t\tmainImage: $img.attr(\"src\"),\r\n\t\t\ttype: hotspot.type,\r\n\t\t\tx: +hotspot.x.toFixed(4),\r\n\t\t\ty: +hotspot.y.toFixed(4)\r\n\t\t}\r\n\t};\r\n\r\n\tconst clientParams = utils.makeClientParams($img, \"feature-click\", actionContext);\r\n\r\n\tif (qty !== undefined) {\r\n\t\tclientParams[\"Qty\"] = qty;\r\n\t}\r\n\r\n\tccs_cc_log.dispatchEvent(logCall, clientParams);\r\n}\r\n\r\nfunction buildContent(data, o) {\r\n\tlet $wrap = $(\"<div>\");\r\n\r\n\t$wrap.append(buildMediaContent(data));\r\n\r\n\tif (data.title) {\r\n\t\t$wrap.append($(\"<h4>\").html(data.title));\r\n\t}\r\n\r\n\tif (data.description) {\r\n\t\t$wrap.append($(\"<div>\", { html: data.description }));\r\n\t}\r\n\r\n\tif (data.product) {\r\n\t\t$wrap = buildProductContent($wrap, data, o);\r\n\t}\r\n\r\n\treturn $wrap;\r\n}\r\n\r\nfunction buildMediaContent(data) {\r\n\tif (!data.mediaUrl) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn data.type === \"video\"\r\n\t\t? $(\"<div>\").addClass(c.videoPlayerClass)\r\n\t\t: $(\"<img>\", { src: data.mediaUrl, alt: data.altText });\r\n}\r\n\r\nfunction buildProductContent($wrap, data, o) {\r\n\tconst crossSell = o.crossSell;\r\n\tconst price = data.product.price;\r\n\r\n\tconst hideLinkWithPrice = crossSell.showLinkWithPrice && (crossSell.parsingJs || !price || !price.value);\r\n\r\n\tif (!hideLinkWithPrice) {\r\n\t\twrapIntoProductLink($wrap, data, o);\r\n\t}\r\n\r\n\treturn $wrap\r\n\t\t.append(buildProductPrice(data, o))\r\n\t\t.append(buildProductAddToCart(data, o));\r\n}\r\n\r\nfunction wrapIntoProductLink($content, data, o) {\r\n\tif (!data.product.url || !$content.is(\":parent\")) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst $eventTargets = $content.find(\"img, h4\");\r\n\r\n\tconst $span = $(\"<span>\")\r\n\t\t.attr(\"data-logo-productLink\", true)\r\n\t\t.data(\"log-event\", o.logCall)\r\n\t\t.on(\"click\", dispatchConversionEvent);\r\n\r\n\tconst $link = $(\"<a>\")\r\n\t\t.attr(\"href\", data.product.url)\r\n\t\t.attr(\"target\", o.crossSell.target || \"_blank\");\r\n\r\n\t$eventTargets.wrap($span).wrap($link);\r\n}\r\n\r\nfunction buildProductPrice(data, o) {\r\n\tconst price = data.product.price;\r\n\r\n\tif (!price && !o.crossSell.priceFallbackText) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst $block = $(\"<div>\").addClass(c.productPriceClass);\r\n\r\n\tif (!o.crossSell.parsingJs) {\r\n\t\t$block.text(price.value || o.crossSell.priceFallbackText);\r\n\t}\r\n\r\n\treturn $block;\r\n}\r\n\r\nfunction buildProductAddToCart(data, o) {\r\n\tconst addToCart = data.product.addToCart;\r\n\tif (!addToCart) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst crossSell = o.crossSell;\r\n\tconst price = data.product.price;\r\n\r\n\tconst hideAtcOnInit = crossSell.showAddToCartWithPrice && (crossSell.parsingJs || !price || !price.value);\r\n\r\n\treturn $(\"<div>\")\r\n\t\t.addClass(c.productCartClass)\r\n\t\t.toggleClass(c.customCartClass, addToCart.isCustom === true)\r\n\t\t.html(addToCart.html)\r\n\t\t.toggle(!hideAtcOnInit)\r\n\t\t.children()\r\n\t\t.data(\"log-event\", o.logCall)\r\n\t\t.on(\"click\", dispatchConversionEvent)\r\n\t\t.parent();\r\n}\r\n\r\nfunction dispatchConversionEvent(e) {\r\n\r\n\tconst $el = $(e.currentTarget);\r\n\tconst qtip = $el.closest(\".qtip\").data(\"qtip\");\r\n\r\n\tlet context = qtip.hotspot.product.logData;\r\n\r\n\tif ($el.data(\"logo-addtocart\")) {\r\n\t\tcontext = JSON.parse(context);\r\n\t\tcontext.type = \"addtocart\";\r\n\t}\r\n\r\n\tutils.dispatchEvent(\r\n\t\t$el.data(\"log-event\"),\r\n\t\tqtip.target,\r\n\t\t\"conversion\",\r\n\t\tcontext);\r\n}\r\n\r\nfunction renderVideo(api, o) {\r\n\tconst hotspot = api.hotspot;\r\n\tif (hotspot.type !== \"video\") {\r\n\t\treturn;\r\n\t}\r\n\r\n\tapi.tooltip\r\n\t\t.toggleClass(c.tooltipClass + \"-video-only\", !hotspot.title && !hotspot.description)\r\n\t\t.one(\"tooltipshow\", () => {\r\n\t\t\tconst $content = api.elements.content;\r\n\t\t\tconst $player = $content.find(`.${c.videoPlayerClass}`);\r\n\t\t\tconst isMobile = o.isMobile;\r\n\r\n\t\t\tconst settings = {\r\n\t\t\t\tfile: api.hotspot.mediaUrl,\r\n\t\t\t\ttranscodedFile: api.hotspot.transcodedUrl,\r\n\t\t\t\tccUrl: api.hotspot.ccUrl,\r\n\t\t\t\tccLang: api.hotspot.ccLang,\r\n\t\t\t\theight: isMobile ? \"100%\" : $content.height(),\r\n\t\t\t\twidth: isMobile ? \"100%\" : $content.width(),\r\n\t\t\t\tplayOnInit: o.autoplayVideo,\r\n\t\t\t\tpluginPath: o.video.pluginPath,\r\n\t\t\t\tdisableCC: o.video.disableCC,\r\n\t\t\t\ttracking: api.target\r\n\t\t\t};\r\n\r\n\t\t\tconst player = api.player = initVideo($player, o.logCall, settings);\r\n\r\n\t\t\tapi.tooltip\r\n\t\t\t\t.on(\"tooltipvisible\", () => o.autoplayVideo && player.play())\r\n\t\t\t\t.on(\"tooltiphide\", () => player.pause());\r\n\t\t});\r\n}\r\n\r\nfunction renderProduct(api, o) {\r\n\tconst hotspot = api.hotspot;\r\n\tif (!hotspot.product) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst $tooltip = api.tooltip;\r\n\r\n\tconst price = hotspot.product.price;\r\n\tconst apiUrl = price && price.apiUrl;\r\n\r\n\tconst crossSell = o.crossSell;\r\n\tconst parsingJs = crossSell && crossSell.parsingJs;\r\n\r\n\tif (apiUrl && parsingJs) {\r\n\t\t$tooltip.one(\"tooltipshow\", () => {\r\n\t\t\tconst $block = $tooltip\r\n\t\t\t\t.find(`.${c.productPriceClass}`)\r\n\t\t\t\t.addClass(c.loadingClass);\r\n\r\n\t\t\tCcsLogoProgram.requestPrice(\r\n\t\t\t\tresponse => {\r\n\t\t\t\t\tif (response.result) {\r\n\t\t\t\t\t\t$block.text(response.result);\r\n\r\n\t\t\t\t\t\t$tooltip.find(`.${c.productCartClass}`).show();\r\n\r\n\t\t\t\t\t\tif (crossSell.showLinkWithPrice) {\r\n\t\t\t\t\t\t\twrapIntoProductLink($tooltip, hotspot, o);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$block.text(crossSell.priceFallbackText);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$block.removeClass(c.loadingClass);\r\n\t\t\t\t\t$tooltip.qtip(\"reposition\");\r\n\t\t\t\t},\r\n\t\t\t\tapiUrl,\r\n\t\t\t\tparsingJs,\r\n\t\t\t\to.logCall,\r\n\t\t\t\tutils.makeClientParams(api.target, \"error\", null, \"Submit\"));\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction renderMobile(api) {\r\n\twindow\r\n\t\t.matchMedia(\"(orientation: portrait)\")\r\n\t\t.addListener(() => {\r\n\t\t\tif (api.tooltip.is(\":visible\")) {\r\n\t\t\t\tif (api.hotspot.type === \"video\" && api.player) {\r\n\t\t\t\t\tconst player = api.player.getPlayer();\r\n\t\t\t\t\tplayer.mejs.exitFullScreen();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tapi.hide();\r\n\t\t\t}\r\n\t\t});\r\n}\r\n\r\nfunction hideMobile() {\r\n\t$(\"body\").removeClass(c.noScrollClass);\r\n}\r\n\r\nfunction showMobile(api) {\r\n\t$(\"body\").addClass(c.noScrollClass);\r\n\r\n\tconst screenSize = getScreenSize();\r\n\r\n\tapi.set(\"position.target\", getScreenCenter(screenSize));\r\n\r\n\tif (api.hotspot.type === \"video\") {\r\n\t\tsetMobileVideoSize(api, screenSize);\r\n\t} else {\r\n\t\tsetMobileDefaultSize(api, screenSize);\r\n\t}\r\n}\r\n\r\nfunction setMobileDefaultSize(api, s) {\r\n\tconst $content = $(api.elements.content);\r\n\tconst closeButton = 36;\r\n\r\n\t$content\r\n\t\t.add($content.find(\"img\"))\r\n\t\t.css({\r\n\t\t\t\"max-width\": s.innerWidth - closeButton / 2 + \"px\",\r\n\t\t\t\"max-height\": s.innerHeight - closeButton / 2 + \"px\"\r\n\t\t});\r\n}\r\n\r\nfunction setMobileVideoSize(api, s) {\r\n\tconst $content = $(api.elements.content);\r\n\tconst h = Math.min((s.width - s.margin) / (16 / 9), s.innerHeight);\r\n\r\n\t$content.css({\r\n\t\t\"max-width\": s.innerWidth + \"px\",\r\n\t\t\"max-height\": s.innerHeight + \"px\"\r\n\t});\r\n\r\n\t$content.find(`.${c.videoPlayerClass}`)\r\n\t\t.css({\r\n\t\t\theight: h + \"px\",\r\n\t\t\twidth: s.innerWidth + \"px\"\r\n\t\t});\r\n\r\n\tif (api.player) {\r\n\t\tapi.player.mejs.resetSize();\r\n\t}\r\n}\r\n\r\nfunction getScreenSize() {\r\n\tconst width = window.innerWidth\r\n\t\t? window.innerWidth\r\n\t\t: document.documentElement.clientWidth\r\n\t\t\t? document.documentElement.clientWidth\r\n\t\t\t: screen.width;\r\n\r\n\tconst height = window.innerHeight\r\n\t\t? window.innerHeight\r\n\t\t: document.documentElement.clientHeight\r\n\t\t\t? document.documentElement.clientHeight\r\n\t\t\t: screen.height;\r\n\r\n\tconst margin = Math.round(Math.min(width, height) * 0.2);\r\n\r\n\treturn {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\tmargin: margin,\r\n\t\tinnerWidth: width - margin,\r\n\t\tinnerHeight: height - margin\r\n\t};\r\n}\r\n\r\nfunction getScreenCenter(screen) {\r\n\tconst $w = $(window);\r\n\treturn [\r\n\t\tscreen.width / 2 + $w.scrollLeft(),\r\n\t\tscreen.height / 2 + $w.scrollTop()\r\n\t];\r\n}\r\n","Ôªøimport $ from \"jquery\";\r\nimport { expand as expandAccordion } from \"./accordion\";\r\n\r\nconst c = {\r\n\tareaSelector: \"div[data-ccs-cc-inline-jumplink]\",\r\n\tanchorIdAttr: \"data-anchor-id\",\r\n\tholderSelector: \"[data-ccs-jumplink-container]\",\r\n\titemClass: \"ccs-cc-inline-jumplink-item\",\r\n\tseparatorClass: \"ccs-cc-inline-jumplink-separator\",\r\n\tcontainerClass: \"ccs-cc-inline-jumplink-container\",\r\n\ttextAttr: \"data-ccs-cc-inline-jumplink\",\r\n\thiddenAttr: \"data-ccs-jumplink-hidden\"\r\n};\r\n\r\nexport default function (ep, options) {\r\n\tconst o = options.jumplinks;\r\n\r\n\tif (!o.enabled) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tlet jumplinksHtml = o.description;\r\n\r\n\tep.find(c.areaSelector).each(function () {\r\n\t\tconst $jumplinkArea = $(this);\r\n\r\n\t\tconst text = $jumplinkArea.attr(c.textAttr);\r\n\t\tconst anchorId = $jumplinkArea.attr(\"id\");\r\n\r\n\t\tif (!text || !anchorId) return;\r\n\r\n\t\tif (jumplinksHtml !== o.description) {\r\n\t\t\tjumplinksHtml += `<span class='${c.separatorClass}'>|</span>`;\r\n\t\t}\r\n\r\n\t\tjumplinksHtml += $(\"<a></a>\")\r\n\t\t\t.addClass(c.itemClass)\r\n\t\t\t.attr(\"href\", `#${anchorId}`)\r\n\t\t\t.attr(c.anchorIdAttr, anchorId)\r\n\t\t\t.attr(\"title\", text)\r\n\t\t\t.text(text)\r\n\t\t\t.wrap(\"<div></div>\")\r\n\t\t\t.parent()\r\n\t\t\t.html();\r\n\t});\r\n\r\n\tjumplinksHtml = `<span class='${c.containerClass}'>${jumplinksHtml}</span>`;\r\n\r\n\tep.find(c.areaSelector).each(function () {\r\n\t\tconst $jumplinkArea = $(this);\r\n\r\n\t\tif (!$jumplinkArea.attr(c.hiddenAttr)) {\r\n\t\t\t$jumplinkArea.find(c.holderSelector).append(jumplinksHtml);\r\n\r\n\t\t\tconst anchorId = $jumplinkArea.attr(\"id\");\r\n\t\t\tconst $currentJumplinkItem = $jumplinkArea.find(`a[${c.anchorIdAttr}='${anchorId}']`);\r\n\t\t\t$currentJumplinkItem.prev(`.${c.separatorClass}`).remove();\r\n\t\t\t$currentJumplinkItem.remove();\r\n\t\t}\r\n\t});\r\n\r\n\tep.on(\r\n\t\t\"click\",\r\n\t\t`.${c.itemClass}`,\r\n\t\tfunction (event) {\r\n\t\t\tconst areaSelector = `#${$(event.currentTarget).attr(c.anchorIdAttr)}`;\r\n\t\t\tconst $area = $(areaSelector);\r\n\r\n\t\t\texpandAccordion($area);\r\n\t\t}\r\n\t);\r\n}\r\n","Ôªøimport $ from \"jquery\";\r\nconst c = {\r\n\tspecsArea: \".ccs-cc-inline-specifications\",\r\n\tshowButton: \".ccs-cc-inline-specs-more-btn[data-ccs-cc-inline-specs-show]\",\r\n\thideButton: \".ccs-cc-inline-specs-more-btn[data-ccs-cc-inline-specs-hide]\",\r\n\texpandableSpecs: \"[data-ccs-cc-inline-specs-expandable]\",\r\n\tspecRow: \".ccs-cc-inline-specs-row\"\r\n};\r\n\r\nexport default function (ep) {\r\n\r\n\tconst $specsArea = ep.find(c.specsArea);\r\n\tconst $specsShowButton = $specsArea.find(c.showButton);\r\n\tconst $specsHideButton = $specsArea.find(c.hideButton);\r\n\tconst $expandableSpecs = $specsArea.find(c.expandableSpecs);\r\n\r\n\t$(c.specRow).each(function () {\r\n\t\tvar imgs = $(this).find(\"img\");\r\n\t\timgs.each(function () {\r\n\t\t\tvar fn = $(this).attr(\"src\").split('/').pop().split('.').shift();\r\n\t\t\t$(this).attr(\"alt\", fn);\r\n\t\t})\r\n\t});\r\n\r\n\t$specsHideButton.find(\"a\").click(function () {\r\n\t\t$expandableSpecs.hide(\"fast\");\r\n\t\t$specsShowButton.show();\r\n\t\t$specsHideButton.hide();\r\n\t});\r\n\r\n\t$specsShowButton.find(\"a\").click(function () {\r\n\t\t$expandableSpecs.show(\"fast\");\r\n\t\t$specsShowButton.hide();\r\n\t\t$specsHideButton.show();\r\n\t});\r\n\r\n}","Ôªøimport $ from \"jquery\";\r\nimport require from \"require\";\r\nimport * as utils from \"./utils\";\r\n\r\nconst c = {\r\n\twidth: 480,\r\n\theight: 320,\r\n\tanimate: utils.isMobile(),\r\n\trootSelector: \".ccs-cc-inline\",\r\n\tspinSelector: \".ccs-cc-inline-spritespin-container\",\r\n\tpreloadLayer: \"div[data-preload-layer='true']\",\r\n\tpreloadContainer: \"div[data-preload-container]\",\r\n\ttoolbox: {\r\n\t\tplayPauseBtn: \"span[data-play-pause='true']\",\r\n\t\tdefaultSliderHeight: 50,\r\n\t\tslider: \"div[data-slider-ui=true]\",\r\n\t\tattr: {\r\n\t\t\tslider: \"data-slider-ui\",\r\n\t\t},\r\n\t\tcss: {\r\n\t\t\tplay: \"ccs-cc-inline-video-play-icon\",\r\n\t\t\tpause: \"ccs-cc-inline-video-pause-icon\"\r\n\t\t}\r\n\t},\r\n\tspritespinImageSelector: \".spritespin-stage\",\r\n\taltText: \"data-default-alt-text\"\r\n};\r\n\r\nexport default function setup(options) {\r\n\tconst o = $.extend({}, c, options.spritespin, { logCall: options.logCall });\r\n\r\n\tif (!o.source || !o.source.length) {\r\n\t\treturn;\r\n\t}\r\n\r\n\trequire(\"jqSpitespin\");\r\n\trequire(\"jqSlider\");\r\n\r\n\tconst ep = $(`#${options.inlineContentId}`);\r\n\r\n\tutils.updateOnVisible(ep, null, () => runInitialization(o));\r\n}\r\n\r\nfunction runInitialization(o) {\r\n\r\n\tconst source = o.source;\r\n\r\n\tconst width = o.width;\r\n\tconst height = o.height;\r\n\r\n\tconst $toolbox = $(`#${o.toolboxId}`);\r\n\tconst $rootDiv = $toolbox.closest(c.rootSelector);\r\n\tconst $preloadContainer = $rootDiv.find(o.preloadContainer);\r\n\tconst $playPauseBtn = $toolbox.find(o.toolbox.playPauseBtn);\r\n\r\n\tlet defaultWidth = width;\r\n\tlet defaultHeight = height;\r\n\r\n\tlet resizeTimeout;\r\n\r\n\tcalculateImageDimensions($preloadContainer, source[0], function (calculatedWidth, calculatedHeight) {\r\n\t\tif (defaultWidth > calculatedWidth)\r\n\t\t\tdefaultWidth = calculatedWidth;\r\n\r\n\t\tdefaultHeight = calculateContainerHeight(defaultWidth, calculatedWidth, calculatedHeight);\r\n\r\n\t\t$(window).resize(function () {\r\n\t\t\tresizeTimeout = setTimeout(function () {\r\n\t\t\t\tonWindowResize.call(o, defaultWidth, defaultHeight, $rootDiv, $toolbox, $playPauseBtn);\r\n\t\t\t}, 100);\r\n\t\t});\r\n\r\n\t\tconst api = onWindowResize.call(o, defaultWidth, defaultHeight, $rootDiv, $toolbox, $playPauseBtn, true);\r\n\r\n\t\tdrawHelperTools.call(o, $toolbox, defaultWidth, $playPauseBtn, api);\r\n\t});\r\n}\r\n\r\nfunction calculateImageDimensions($preloadContainer, imgUrl, completeCallback) {\r\n\tconst image = new Image();\r\n\timage.src = imgUrl;\r\n\timage.onload = function () {\r\n\t\tconst calculatedWidth = this.width;\r\n\t\tconst calculatedHeight = this.height;\r\n\r\n\t\tif ($.isFunction(completeCallback))\r\n\t\t\tcompleteCallback(calculatedWidth, calculatedHeight);\r\n\t};\r\n}\r\n\r\nfunction calculateContainerHeight(containerWidth, imageWidth, imageHeight) {\r\n\treturn (containerWidth * imageHeight) / imageWidth;\r\n}\r\n\r\nfunction drawHelperTools($toolbox, width, $playPauseBtn, spriteSpinApi) {\r\n\tconst settings = this;\r\n\r\n\t$toolbox.width(width);\r\n\r\n\t$playPauseBtn.on(\"keydown\", function () {\r\n\t\tif (event.which == 13) {\r\n\t\t\t$(this).click();\r\n\t\t}\r\n\t});\r\n\r\n\t$playPauseBtn.click(function () {\r\n\t\tsettings.animate = changePlayPauseState(\r\n\t\t\t$playPauseBtn,\r\n\t\t\tspriteSpinApi,\r\n\t\t\tsettings.animate,\r\n\t\t\tsettings.toolbox.css.pause);\r\n\r\n\t\tlogChangeState(settings);\r\n\t});\r\n}\r\n\r\nfunction changePlayPauseState($playPauseBtn, api, isPlaying, cssSelector) {\r\n\tif (isPlaying) {\r\n\t\t$playPauseBtn.removeClass(cssSelector);\r\n\t\tapi.stopAnimation();\r\n\t} else {\r\n\t\t$playPauseBtn.addClass(cssSelector);\r\n\t\tapi.startAnimation();\r\n\t}\r\n\r\n\treturn !isPlaying;\r\n}\r\n\r\nfunction resizeToolbox($toolbox, width) {\r\n\t$toolbox.width(width);\r\n}\r\n\r\nfunction initControl(width, height, $toolbox, $playPauseBtn, firstTime) {\r\n\tvar settings = this;\r\n\r\n\tconst id = settings.id;\r\n\tconst source = settings.source;\r\n\tconst animate = settings.animate;\r\n\tconst fps = settings.fps;\r\n\tconst rate = settings.rate;\r\n\r\n\tconst $spritespinDiv = $(\"#\" + id);\r\n\tconst $spritespinContainer = $spritespinDiv.parent();\r\n\tlet $slider;\r\n\tconst $preloadDiv = $spritespinContainer.find(settings.preloadLayer);\r\n\t$preloadDiv.width(width);\r\n\t$preloadDiv.height(height + settings.toolbox.defaultSliderHeight);\r\n\r\n\tconst animated = animate;\r\n\tlet api;\r\n\r\n\tvar rateFramesCount = fps * rate;\r\n\tvar rateCounter = 0;\r\n\tconst frameTime = 1000 / fps;\r\n\r\n\t$spritespinContainer.width(width);\r\n\t$spritespinDiv.spritespin({\r\n\t\tanimate: animated,\r\n\t\tsource: source,\r\n\t\tframes: source.length,\r\n\t\tframesX: 1,\r\n\t\tframeTime: frameTime,\r\n\t\trenderer: \"image\",\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\treverse: false,\r\n\t\tonLoad: function () {\r\n\r\n\t\t\t$preloadDiv.remove();\r\n\t\t\tapi = $spritespinDiv.spritespin(\"api\");\r\n\t\t\t$slider = $toolbox.find(settings.toolbox.slider);\r\n\r\n\t\t\tif ($slider.length !== 0)\r\n\t\t\t\treturn;\r\n\r\n\t\t\t$slider = $(\"<div>\");\r\n\t\t\t$slider.attr(settings.toolbox.attr.slider, \"true\");\r\n\r\n\t\t\t$slider.slider({\r\n\t\t\t\tmin: 0,\r\n\t\t\t\tmax: settings.source.length - 1,\r\n\t\t\t\tslide: function (e, ui) {\r\n\t\t\t\t\tif (settings.animate)\r\n\t\t\t\t\t\tsettings.animate = changePlayPauseState(\r\n\t\t\t\t\t\t\t$playPauseBtn,\r\n\t\t\t\t\t\t\tapi,\r\n\t\t\t\t\t\t\tsettings.animate,\r\n\t\t\t\t\t\t\tsettings.toolbox.css.pause);\r\n\r\n\t\t\t\t\trateCounter = 0;\r\n\r\n\t\t\t\t\tapi.updateFrame(ui.value);\r\n\t\t\t\t},\r\n\t\t\t\tstop: function (e, ui) {\r\n\t\t\t\t\tlogRotate(settings, \"slider\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t$slider.appendTo($toolbox);\r\n\r\n\t\t\tresizeToolbox($toolbox, width);\r\n\r\n\t\t\t$spritespinDiv.trigger(\"ccsSpinLoad\");\r\n\t\t},\r\n\t\tonFrame: function (e, data) {\r\n\t\t\tif (rate !== 0) {\r\n\t\t\t\trateCounter++;\r\n\r\n\t\t\t\tif (rateCounter === rateFramesCount) {\r\n\t\t\t\t\trateCounter = 0;\r\n\t\t\t\t\tapi.stopAnimation();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t$slider.slider(\"value\", data.frame);\r\n\r\n\t\t\tif (!api.isPlaying()) {\r\n\t\t\t\tsettings.animate = true;\r\n\t\t\t\tsettings.animate = changePlayPauseState(\r\n\t\t\t\t\t$playPauseBtn,\r\n\t\t\t\t\tapi,\r\n\t\t\t\t\tsettings.animate,\r\n\t\t\t\t\tsettings.toolbox.css.pause);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDraw: function () {\r\n\t\t\tsetImageAltText($spritespinDiv);\r\n\t\t}\r\n\t});\r\n\r\n\t$spritespinDiv.trigger(\"ccsSpinResize\");\r\n\r\n\tapi = $spritespinDiv.spritespin(\"api\");\r\n\r\n\tif (!firstTime)\r\n\t\treturn api;\r\n\r\n\tvar playTrigger = false,\r\n\t\tmousedown = false;\r\n\r\n\t$spritespinDiv.on(\"mousedown touchstart\", function () {\r\n\t\tplayTrigger = true;\r\n\t\tmousedown = true;\r\n\r\n\t\tsetTimeout(function () {\r\n\t\t\tplayTrigger = false;\r\n\t\t}, 200);\r\n\t});\r\n\r\n\t$spritespinDiv.on(\"mouseup touchend\", function (e) {\r\n\r\n\t\tif (playTrigger) {\r\n\t\t\tsettings.animate = changePlayPauseState(\r\n\t\t\t\t$playPauseBtn,\r\n\t\t\t\tapi,\r\n\t\t\t\tsettings.animate,\r\n\t\t\t\tsettings.toolbox.css.pause);\r\n\t\t\tplayTrigger = false;\r\n\r\n\t\t\tlogChangeState(settings);\r\n\t\t} else {\r\n\t\t\tif (mousedown) {\r\n\t\t\t\tlogRotate(settings, \"drag\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tmousedown = false;\r\n\t});\r\n\r\n\t$spritespinDiv.on(\"mouseleave\", function (e) {\r\n\t\tif (e.buttons !== 0 && mousedown) {\r\n\t\t\tlogRotate(settings, \"drag\");\r\n\t\t}\r\n\r\n\t\tmousedown = false;\r\n\t});\r\n\r\n\treturn api;\r\n}\r\n\r\nfunction setImageAltText($spritespinDiv) {\r\n\tconst altText = $spritespinDiv.attr(c.altText);\r\n\tconst $spriteDiv = $spritespinDiv.find(c.spritespinImageSelector);\r\n\tconst $sprite = $spriteDiv.find(\"img\");\r\n\t$sprite.each(function (index) {\r\n\t\t$(this).attr(\"alt\", `${altText} ${index +1}`);\r\n\t});\r\n}\r\n\r\nfunction onWindowResize(width, height, $rootContainer, $toolbox, $playPauseBtn, firstTime) {\r\n\tconst settings = this;\r\n\r\n\tlet widthToSet;\r\n\tlet heightToSet;\r\n\tif ($rootContainer.width() < width) {\r\n\t\theightToSet = Math.floor($rootContainer.width() * height / width);\r\n\t\twidthToSet = $rootContainer.width();\r\n\t} else {\r\n\t\twidthToSet = width;\r\n\t\theightToSet = height;\r\n\t}\r\n\r\n\tconst api = initControl.call(settings, widthToSet, heightToSet, $toolbox, $playPauseBtn, firstTime);\r\n\tresizeToolbox($toolbox, widthToSet);\r\n\r\n\treturn api;\r\n}\r\n\r\nfunction logChangeState(settings) {\r\n\tconst context = { type: settings.animate ? \"play\" : \"stop\" };\r\n\tlogEvent(settings, context);\r\n}\r\n\r\nfunction logRotate(settings, type) {\r\n\tconst context = { type: type };\r\n\tlogEvent(settings, context);\r\n}\r\n\r\nfunction logEvent(settings, context) {\r\n\tutils.dispatchEvent(\r\n\t\tsettings.logCall,\r\n\t\t`#${settings.toolboxId}`,\r\n\t\t\"feature-click\",\r\n\t\tcontext\r\n\t);\r\n}","Ôªøimport $ from \"jquery\";\r\nimport * as utils from \"./utils\";\r\nimport \"Fancybox\";\r\n\r\nconst c = {\r\n\tarSectionSelector: \".ccs-cc-inline-augmentedreality\",\r\n\tarFancyBoxContent: \".ccs-inline-ar-fancybox-content\"\r\n};\r\n\r\nvar animationList = null;\r\n\r\nexport default function (ep, options) {\r\n\tconst $container = ep.find(c.arSectionSelector);\r\n\t\r\n\t// in browser without customElements remove block\r\n\tif (!window.customElements) {\r\n\t\t$container.remove();\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst $thumbnailCnt = $container.find(\".ccs-inline-ar-thumbnail-cnt\");\r\n\tconst $viewerCnt = $container.find(\".ccs-inline-ar-viewer-cnt\");\r\n\r\n\tif (options.augmentedReality.autoLoad) {\r\n\t\tloadModelViewer();\r\n\t}\r\n\r\n\t$thumbnailCnt.on(\"keydown\", function (event) {\r\n\t\tif (event.which == 13) {\r\n\t\t\t$(this).click();\r\n\t\t}\r\n\t});\r\n\r\n\t$thumbnailCnt.on(\"click\",\r\n\t\t() => {\r\n\t\t\tif (options.augmentedReality.launchInLightbox) {\r\n\t\t\t\tvar config = {\r\n\t\t\t\t\tcontent: `<div class='ccs-inline-ar-fancybox-content' tabindex='0'>${$viewerCnt.find(\"script\").text()}</div>`,\r\n\t\t\t\t\ttype: \"html\",\r\n\t\t\t\t\tbaseClass: \"ccs-cc-inline\",\r\n\t\t\t\t\tsmallBtn: false,\r\n\t\t\t\t\ttouch: false,\r\n\t\t\t\t\tafterLoad: function (instance, fbContent) {\r\n\t\t\t\t\t\tconst $viewer = fbContent.$content.find(\"ccs-model-viewer\");\r\n\t\t\t\t\t\tsetViewerHandler($viewer);\r\n\t\t\t\t\t\tajustLightBoxSize();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$.fancybox.open(config);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tloadModelViewer();\r\n\t\t});\r\n\r\n\tfunction getErrorMessage(error) {\r\n\t\treturn error && error.originalEvent\r\n\t\t\t? {\r\n\t\t\t\tmessage: error.originalEvent.detail.message,\r\n\t\t\t\ttype: error.originalEvent.detail.type\r\n\t\t\t}\r\n\t\t\t: undefined;\r\n\t}\r\n\r\n\tfunction loadModelViewer() {\r\n\t\t$thumbnailCnt.hide();\r\n\t\t$viewerCnt.show();\r\n\r\n\t\t$viewerCnt.html($viewerCnt.find(\"script\").text());\r\n\t\tconst $viewer = $viewerCnt.find(\"ccs-model-viewer\");\r\n\t\tsetViewerHandler($viewer);\r\n\t}\r\n\r\n\tfunction setViewerHandler($viewer) {\r\n\t\t$viewer.on(\"error\", error => {\r\n\t\t\tutils.dispatchEvent(options.logCall, $viewer, \"error\", getErrorMessage(error), \"Submit\");\r\n\t\t});\r\n\r\n\t\t$viewer.on(\"ar-status\", event => {\r\n\t\t\tif (event.detail.status === \"not-presenting\") {\r\n\t\t\t\t$viewer.attr(\"ar-modes\", $viewer.attr(\"ar-modes\").replace(\"webxr\").trim());\r\n\t\t\t\t$viewer[0].activateAR();\r\n\t\t\t}\r\n\t\t\tutils.dispatchEvent(options.logCall, $viewer, \"ar-status\", { type: event.detail.status });\r\n\t\t});\r\n\r\n\t\tutils.dispatchEvent(options.logCall, $viewer, \"feature-click\", { type: \"play\" });\r\n\r\n\t\tloadAnimation($viewer);\r\n\t}\r\n\r\n\tfunction loadAnimation(viewer) {\r\n\t\tif (options.augmentedReality.animation == null)\r\n\t\t\treturn;\r\n\r\n\t\t// launch animation first time\r\n\t\tvar playEvent = options.augmentedReality.animation.playEvent;\r\n\t\tanimationList = options.augmentedReality.animation.animationNameList;\r\n\t\tif (playEvent === 'Click') {\r\n\t\t\tviewer.one('click',\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\tsetAnimationName(viewer);\r\n\t\t\t\t\tviewer[0].play();\r\n\t\t\t\t\tsetChangeAnimationEvent(viewer);\r\n\t\t\t\t\tutils.dispatchEvent(options.logCall, viewer, \"feature-click\", { type: \"animationStart\" });\r\n\t\t\t\t});\r\n\t\t} else if (playEvent === 'DoubleClick') {\r\n\t\t\tviewer.one('dblclick',\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\tsetAnimationName(viewer);\r\n\t\t\t\t\tviewer[0].play();\r\n\t\t\t\t\tsetChangeAnimationEvent(viewer);\r\n\t\t\t\t\tutils.dispatchEvent(options.logCall, viewer, \"feature-click\", { type: \"animationStart\" });\r\n\t\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar delay = options.augmentedReality.animation.delay;\r\n\t\t\tif (delay != null) {\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\tlaunchAutoplayAnimation(viewer);\r\n\t\t\t\t}, delay);\r\n\t\t\t} else {\r\n\t\t\t\tlaunchAutoplayAnimation(viewer);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setChangeAnimationEvent(viewer) {\r\n\t\tvar changeEvent = options.augmentedReality.animation.changeEvent;\r\n\t\tif (changeEvent == 'Action') {\r\n\t\t\tviewer.on('click',\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\tsetAnimationName(viewer);\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tvar delay = options.augmentedReality.animation.delay;\r\n\t\t\tif (delay != null) {\r\n\t\t\t\tsetInterval(function () {\r\n\t\t\t\t\tsetAnimationName(viewer);\r\n\t\t\t\t}, delay);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setAnimationName(viewer) {\r\n\t\tif (animationList == null || animationList.length === 0) {\r\n\t\t\tanimationList = viewer[0].availableAnimations;\r\n\t\t}\r\n\r\n\t\tif (!viewer.attr('animation-name')) {\r\n\t\t\tviewer.attr('animation-name', animationList[0]);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar currentAnimationNameIndex = animationList.indexOf(viewer.attr('animation-name'));\r\n\t\tvar newAnimationName = currentAnimationNameIndex == animationList.length - 1\r\n\t\t\t? options.augmentedReality.animation.repeat === true ? animationList[0] : null\r\n\t\t\t: animationList[currentAnimationNameIndex + 1];\r\n\r\n\t\tif (newAnimationName != null)\r\n\t\t\tviewer.attr('animation-name', newAnimationName);\r\n\t\telse {\r\n\t\t\tviewer[0].pause();\r\n\t\t\tviewer[0].currentTime = 0;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction launchAutoplayAnimation(viewer) {\r\n\t\tsetAnimationName(viewer);\r\n\t\tviewer.attr(\"autoplay\", true);\r\n\t\tsetChangeAnimationEvent(viewer);\r\n\t}\r\n\r\n\tfunction ajustLightBoxSize() {\r\n\t\tvar ar = options.augmentedReality.aspectRatio == undefined\r\n\t\t\t|| options.augmentedReality.aspectRatio == 0\r\n\t\t\t? getDefaultAspectRatio() : options.augmentedReality.aspectRatio;\r\n\r\n\t\tvar height = $container.height() / window.innerHeight * 100;\r\n\t\tvar width = height / ar;\r\n\t\t$(c.arFancyBoxContent)\r\n\t\t\t.css(\"width\", `${width}vw`)\r\n\t\t\t.css(\"height\", `${height}vh`);\r\n\t}\r\n\r\n\tfunction getDefaultAspectRatio() {\r\n\t\treturn window.innerWidth / window.innerHeight;\r\n\t}\r\n}","Ôªøimport \"slick\";\r\n\r\nimport $ from \"jquery\";\r\nimport { ensureStyles }  from \"../utils\";\r\n\r\nconst c = {\r\n\trootSelector: \".ccs-cc-inline-capacitychart\",\r\n\tcontainerSelector: \".ccs-cc-inline-capacitychart-container\",\r\n\tcontentSelector: \".ccs-cc-inline-acc-content\",\r\n\tensureStyleLoaded: \".ccs-cc-inline-ensure-style-loaded\",\r\n\twidthBoundaryMedium: 570,\r\n\twidthBoundaryWide: 680\r\n};\r\n\r\nlet currentColumnCount;\r\n\r\nexport default function init($ep, options) {\r\n\tconst $chart = $ep.find(c.rootSelector);\r\n\r\n\tif (!$chart.length)\r\n\t\treturn;\r\n\r\n\tif ($chart.is(\":visible\") && ensureStyles($ep)) {\r\n\t\tinitImpl($chart, options);\r\n\t} else {\r\n\t\tsetTimeout(function () { init($ep, options); }, 300);\r\n\t}\r\n}\r\n\r\nfunction initImpl($chart, options) {\r\n\tconst $container = $chart.find(c.containerSelector);\r\n\r\n\tconst isRtl = options.isRtl;\r\n\r\n\t$container.ccsSlick({\r\n\t\tinfinite: false,\r\n\t\tdots: false,\r\n\t\tslidesToScroll: 1,\r\n\t\tspeed: 100,\r\n\t\trtl: isRtl,\r\n\t\tswipeToSlide: !isRtl\r\n\t});\r\n\r\n\tconst slick = $container.ccsSlick(\"getSlick\");\r\n\r\n\t$(window).on(\"resize\", function () {\r\n\t\trefreshSlick($chart, $container, slick);\r\n\t});\r\n\r\n\tlet $chartContent = $chart.find(c.contentSelector);\r\n\r\n\tif ($chartContent.length === 0) {\r\n\t\t$chartContent = $chart;\r\n\t}\r\n\r\n\tconst isVisible = function () {\r\n\t\tif ($chartContent.is(\":visible\")) {\r\n\t\t\trefreshSlick($chart, $container, slick);\r\n\t\t} else {\r\n\t\t\tsetTimeout(isVisible, 300);\r\n\t\t}\r\n\t};\r\n\r\n\tsetTimeout(isVisible, 100);\r\n}\r\n\r\nfunction refreshSlick($chart, $container, slick) {\r\n\tconst targetColumnCount = getTargetColumnCount($chart.outerWidth(true));\r\n\tif (targetColumnCount === currentColumnCount) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tcurrentColumnCount = targetColumnCount;\r\n\r\n\tlet columnCount = $container.data(\"columns-count\");\r\n\tif (!columnCount) {\r\n\t\tcolumnCount = Number.POSITIVE_INFINITY;\r\n\t}\r\n\r\n\t// Delayed update since IE sometimes picks width of pre-resized container.\r\n\tsetTimeout(function () {\r\n\t\tconst count = Math.min(targetColumnCount, columnCount);\r\n\t\tslick.slickSetOption(\"slidesToShow\", count, true);\r\n\t\t$container.toggleClass(\"ccs-slick-slider-arrows\", count < slick.slideCount);\r\n\t}, 50);\r\n}\r\n\r\nfunction getTargetColumnCount(width) {\r\n\tif (width <= c.widthBoundaryMedium) {\r\n\t\treturn 3;\r\n\t}\r\n\r\n\tif (width <= c.widthBoundaryWide) {\r\n\t\treturn 4;\r\n\t}\r\n\r\n\treturn 5;\r\n}\r\n","Ôªøimport $ from \"jquery\";\r\nimport { isMobile } from \"../utils\";\r\n\r\nconst c = {\r\n\trootSelector: \".ccs-cc-inline-rangechart\",\r\n\ttabSelector: \".ccs-cc-inline-rangechart-section-title\",\r\n\tsectionActiveClass: \"ccs-rangechart-section-active\",\r\n\tcontentsSelector: \".ccs-cc-inline-rangechart-section-content\"\r\n};\r\n\r\nexport default function init(ep) {\r\n\tconst $chart = ep.find(c.rootSelector);\r\n\r\n\tif (!$chart.length) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t$chart.on(\"click\", c.tabSelector, function () {\r\n\t\t$(this).closest(\"[data-section-id]\").toggleClass(c.sectionActiveClass);\r\n\t});\r\n\r\n\tif (isMobile()) {\r\n\t\t$chart.on(\"click\", c.tabSelector, function () {\r\n\t\t\tconst $el = $(this).closest(\"[data-section-id]\");\r\n\r\n\t\t\treturnScrollToTitle($el);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction returnScrollToTitle($el) {\r\n\t$(\"html, body\").animate({\r\n\t\tscrollTop: $el.offset().top\r\n\t}, 500);\r\n}\r\n","Ôªøimport $ from \"jquery\";\r\nimport \"ElementQueries\";\r\n\r\nimport bazaar from \"./bazaar\";\r\nimport comparisontable from \"./comparisontable\";\r\nimport compatibleitems from \"./compatibleitems\";\r\nimport faq from \"./faq\";\r\nimport features from \"./features\";\r\nimport footnotes from \"./footnotes\";\r\nimport gallery from \"./gallery\";\r\nimport hotspots from \"./hotspots\";\r\nimport jumplinks from \"./jumplinks\";\r\nimport specs from \"./specs\";\r\nimport spin from \"./spin\";\r\nimport augmentedreality from \"./augmentedreality\";\r\n\r\nimport capacityChart from \"./sandisk/capacity\";\r\nimport rangeChart from \"./sandisk/range\";\r\n\r\nimport * as utils from \"./utils\";\r\nimport { init as initAccordion } from \"./accordion\";\r\nimport { initBuyButton as initVideoByButton } from \"./video\";\r\n\r\n\r\nexport default function (options) {\r\n\r\n\tconst ep = $(`#${options.inlineContentId}`);\r\n\r\n\tbazaar(ep, options);\r\n\tcomparisontable(options);\r\n\tcompatibleitems(ep);\r\n\tfaq(ep, options);\r\n\tfeatures(ep, options);\r\n\tfootnotes(ep, options);\r\n\tgallery(ep, options);\r\n\thotspots(ep, options);\r\n\tjumplinks(ep, options);\r\n\tspecs(ep, options);\r\n\tspin(options);\r\n\taugmentedreality(ep, options);\r\n\r\n\tcapacityChart(ep, options);\r\n\trangeChart(ep);\r\n\r\n\tinitVideoByButton(options);\r\n\tinitAccordion(ep, options);\r\n\tinitDocumentsReporting(ep, options);\r\n\tinitSectionViewportReporting(ep, options);\r\n\r\n\tutils.fixBlockWidth(ep);\r\n}\r\n\r\nfunction initDocumentsReporting(ep, o) {\r\n\r\n\tep.find(\".ccs-cc-inline-assets\")\r\n\t\t.on(\"click\",\r\n\t\t\t\".ccs-cc-inline-asset a\",\r\n\t\t\te => utils.dispatchEvent(o.logCall, e.target, \"download\", e.target.href));\r\n}\r\n\r\nfunction initSectionViewportReporting(ep, o) {\r\n\r\n\tconst sectionViewports = ep.find(\".ccs-cc-inline-section[data-elementid]\")\r\n\t\t.map((i, el) => {\r\n\t\t\tconst $acc = $(el).find(\".ccs-cc-inline-acc-content\");\r\n\t\t\treturn $acc.length > 0 ? $acc[0] : el;\r\n\t\t}).toArray();\r\n\r\n\tutils.initViewportEvent(sectionViewports,\r\n\t\tfunction () {\r\n\t\t\tutils.dispatchEvent(o.logCall, this, \"display\", \"viewport\", \"Submit\");\r\n\t\t});\r\n}\r\n","Ôªøimport \"jquery\";\r\nimport \"Fancybox\";\r\nimport { keepFocus } from \"./utils\";\r\n\r\nexport default function init(ep) {\r\n\tep.find(\".ccs-cc-bazaar-read-more\")\r\n\t\t.fancybox({\r\n\t\t\tautoFocus: true,\r\n\t\t\tbackFocus: true,\r\n\t\t\tiframe: {\r\n\t\t\t\tpreload: false\r\n\t\t\t},\r\n\t\t\tafterShow(instance, current) {\r\n\r\n\t\t\t\tif (current.type === \"iframe\") {\r\n\t\t\t\t\tcurrent.$content.attr(\"tabindex\", 0);\r\n\t\t\t\t\tinstance.$refs.toolbar.appendTo(instance.$refs.inner);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkeepFocus(instance.$refs.container[0]);\r\n\t\t\t}\r\n\t\t});\r\n}","Ôªøimport $ from \"jquery\";\r\nimport { updateOnVisible } from \"./utils\";\r\nimport GalleryFactory from \"./gallery/factory\";\r\nimport c from \"./gallery/consts\";\r\n\r\nexport default function (ep, o) {\r\n\r\n\tconst factory = new GalleryFactory();\r\n\r\n\tupdateOnVisible(ep, c.rootGallerySelector, el => {\r\n\t\tconst $gallery = $(el);\r\n\t\tconst gallery = factory.create($gallery, o);\r\n\r\n\t\tgallery.init();\r\n\r\n\t\t$gallery.data(\"gallery\", gallery);\r\n\t});\r\n}"],"sourceRoot":"../../.."}